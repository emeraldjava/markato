!function t(n,e,r){function i(a,u){if(!e[a]){if(!n[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[a]={exports:{}};n[a][0].call(l.exports,function(t){var e=n[a][1][t];return i(e?e:t)},l,l.exports,t,n,e,r)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,n,e){var r,i,o,a,u,s,c,l,f,h,p,d=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1};p=t("./transpose"),r=t("underscore"),f=t("sharp11"),n.exports=function(t,n,e){return e.originalKey=o(n),e.drawKey=e.requestedKey||e.originalKey,e.alts=n.alts,l(e),$(t).html(a(n,e)),null},l=function(t){return $("#currentKey").html(t.drawKey),$("#originalKey").html(t.originalKey),$("#transposeToolbar button").removeClass("btn-info"),$("[data-transposeChord="+t.drawKey+"]").addClass("btn-info"),null},a=function(t,n){var e,r,o,a,s,c,l,f,p,d,g,m;for(e="",e+="<button type='button' class='btn "+(n.isEditing?"btn-success":"btn-info btn-md")+"' id='edit'> <span class='glyphicon "+(n.isEditing?"glyphicon-check":"glyphicon-edit")+"' aria-hidden='true'></span> "+(n.isEditing?"Save":"Edit")+" </button>",e+="<h2>"+h(t)+" <small>in "+n.drawKey+"</small></h2>",e+="<h4>"+i(t)+"</h4>",p=t.lyrics,r=0,s=p.length;s>r;r++){for(g=p[r],n.showSections&&(e+="<div class='section-header'>"+g.section+"</div>",e+="<hr/>"),e+="<div class='section'>",d=g.lines,o=0,c=d.length;c>o;o++){for(f=d[o],a=0,l=f.length;l>a;a++)m=f[a],e+=u(m,n);e+="<br/>"}e+="</div><br/>"}return e},u=function(t,n){var e,i,o,a,u;return t.hasAlts=null!=n.alts[t.chord],e=t.chord,null!=n.replacements[e]&&(e=n.alts[e][n.replacements[e]]),e=e.replace(/'/g,""),u=t.string.trim(),o=["phrase"],t.wordExtension&&o.push("join"),i=["chord"],n.smartMode&&!t.exception&&i.push("mute"),t.hasAlts&&t.exception&&n.showAlts&&i.push("alts"),n.drawKey!==n.originalKey&&e&&(e=p(n.originalKey,n.drawKey,e)),e=e.replace("#","&#x266F;").replace("b","&#x266D;"),(n.showLyrics||e)&&(u||n.showChords)?(a="",a+="<p class='"+o.join(" ")+"'>",n.showChords&&(a+="<span class='"+i.join(" ")+"' data-chord='"+r.escape(t.chord)+"'>"+(e||" ")+"</span><br/>"),null!=u&&n.showLyrics&&(a+="<span class='string'>"+(u||" ")+"</span>"),a+="</p>"):""},o=function(t){var n,e;return e=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],n=[t.meta.KEY,f.note.create(c(t)).clean().name,f.note.create(s(t)).clean().name,"C"],r.find(n,function(t){return d.call(e,t)>=0})},c=function(t){return r.last(r.last(r.last(t.lyrics).lines)).chord},s=function(t){return r.last(r.last(t.chords[r.last(t.sections)]))},h=function(t){return t.meta.TITLE||"?"},i=function(t){return(t.meta.ARTIST||"?")+" <i> "+(t.meta.ALBUM||"?")+"</i>"}},{"./transpose":30,sharp11:14,underscore:28}],2:[function(t,n,e){n.exports="##TITLE  I Wanna Hold Your Hand\n##ARTIST The Beatles\n##ALBUM  A Hard Day's Night\n##KEY    G\n\n#INTRO\n:C D C D C D\n\n#VERSE\n:G D\nOh yeah, ^I'll tell you ^something\n:Em Bm\n^ I think you'll under^stand\n:G D\nWhen ^I'll say that ^something\n:Em B\n^ I wanna hold your h^and\n\n#CHORUS\n:C D G Em \n^ I wanna ^hold your ^ha^nd\n:C D G\n^ I wanna ^hold your ^hand\n\n#VERSE\nOh ^please, say to ^me\n^ You'll let me be your ^man\nAnd ^please, say to ^me\n^ You'll let me hold your h^and\n\n#CHORUS\n\n#BRIDGE\n:Dm G' C Am\n^ And when I ^touch you I feel ^happy in^side\n:Dm G' C D\n^ It's such a ^feeling that my ^love, I can't ^hide\n:C D\n^I can't ^hide\n:C D\n^I can't ^hide\n\n#VERSE\nYeah, ^you've got that ^something\n^ I think you'll under^stand\nWhen ^I'll say that ^something\n^ I wanna hold your h^and\n\n#CHORUS\n^ I wanna ^hold your ^ha^nd\n:* * B\n^ I wanna ^hold your ^hand\n:C D C G\n^I wanna ^hold your ^ha-a-^and\n\n###\nB => B7, B7#5\nG' => G7"},{}],3:[function(t,n,e){var r,i,o,a,u,s,c,l,f,h,p,d;i=t("./draw"),o=t("./example"),c=t("./parser"),d=t("./transpose"),r=t("underscore"),h=t("sharp11"),s="#canvas",p={showChords:!0,showLyrics:!0,showRepeats:!1,showAlts:!0,showSections:!0,smartMode:!0,requestedKey:null,isEditing:!0,showSettings:!0},f=null,u=function(t){var n,e,i,o;for(f={},o=r.keys(t),e=0,i=o.length;i>e;e++)n=o[e],f[n]=null;return f},l=function(){var t;return t=c.parseString($("#input").val()),r.isNull(f)&&(f=u(t.alts)),p.replacements=f,i(s,t,p),$("#edit").click(function(){return p.isEditing=!p.isEditing,p.isEditing?$("#inputCol").show():$("#inputCol").hide(),p.isEditing?$("#outputCol").addClass("col-md-6"):$("#outputCol").removeClass("col-md-6"),l()}),$(".alts").click(function(){var n;return n=r.unescape($(this).attr("data-chord")),$("#alternatesModal .modal-body").html(a(t.alts,n,p)),r.isNull(p.replacements[n])?$("#resetChord").addClass("btn-info"):$("#alternatesModal .modal-body [data-index="+p.replacements[n]+"]").addClass("btn-info"),$("#alternatesModal").modal("show"),$("#alternatesModal button").click(function(){var t;return n=$(this).attr("data-chord"),t=$(this).attr("data-index"),f[n]=null!=t?t:null,p.replacements=f,$("#alternatesModal").modal("hide"),l()})})},$(function(){var t;return $("#input").val(o),l(),$("#input").keyup(l),$("#settings").click(function(){return $("[name='toggle-settings']").bootstrapSwitch("toggleState")}),$("[name='toggle-settings']").on("switchChange.bootstrapSwitch",function(t,n){return p.showSettings=!p.showSettings,n=p.showSettings,n?$("#switches").slideDown():$("#switches").slideUp()}),$("#transposeUp").click(function(){return p.requestedKey=h.note.create($("#currentKey").html()).sharp().clean().name,l()}),$("#transposeDown").click(function(){return p.requestedKey=h.note.create($("#currentKey").html()).flat().clean().name,l()}),$("#transposeReset").click(function(){return p.requestedKey=null,$("#transposeModal").modal("hide"),l()}),$("#transposeToolbar button").click(function(){var t;return t=$(this).attr("data-transposeChord"),p.requestedKey=t,$("#transposeModal").modal("hide"),l()}),t=function(t){return function(n,e){return p[t]=e,l()}},$("[name='toggle-chords']").on("switchChange.bootstrapSwitch",t("showChords")),$("[name='toggle-lyrics']").on("switchChange.bootstrapSwitch",t("showLyrics")),$("[name='toggle-muted']").on("switchChange.bootstrapSwitch",t("smartMode")),$("[name='toggle-section']").on("switchChange.bootstrapSwitch",t("showSections")),$("[name='toggle-alts']").on("switchChange.bootstrapSwitch",t("showAlts")),$("input.bs").bootstrapSwitch()}),a=function(t,n,e){var i,o,a,u,s,c,l;for(s=n.replace(/'/g,""),s=d(e.originalKey,e.drawKey,s),i="",i+="    <button type='button' class='btn btn-lg btn-link' disabled='disabled'>Replace</button>",i+="    <button type='button' class='btn btn-lg btn-default' id='resetChord' data-chord='"+r.escape(n)+"'>"+s+"</button>",i+="    <button type='button' class='btn btn-lg btn-link' disabled='disabled'>with</button>",c=t[n],a=o=0,u=c.length;u>o;a=++o)l=c[a],i+="  <button type='button' class='btn btn-lg btn-default' data-chord='"+r.escape(n)+"' data-index='"+a+"'>"+d(e.originalKey,e.drawKey,l)+"</button>";return i}},{"./draw":1,"./example":2,"./parser":29,"./transpose":30,sharp11:14,underscore:28}],4:[function(t,n,e){},{}],5:[function(t,n,e){function r(t,n){return p.isUndefined(n)?""+n:p.isNumber(n)&&!isFinite(n)?n.toString():p.isFunction(n)||p.isRegExp(n)?n.toString():n}function i(t,n){return p.isString(t)?t.length<n?t:t.slice(0,n):t}function o(t){return i(JSON.stringify(t.actual,r),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,r),128)}function a(t,n,e,r,i){throw new m.AssertionError({message:e,actual:t,expected:n,operator:r,stackStartFunction:i})}function u(t,n){t||a(t,!0,n,"==",m.ok)}function s(t,n){if(t===n)return!0;if(p.isBuffer(t)&&p.isBuffer(n)){if(t.length!=n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}return p.isDate(t)&&p.isDate(n)?t.getTime()===n.getTime():p.isRegExp(t)&&p.isRegExp(n)?t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase:p.isObject(t)||p.isObject(n)?l(t,n):t==n}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function l(t,n){if(p.isNullOrUndefined(t)||p.isNullOrUndefined(n))return!1;if(t.prototype!==n.prototype)return!1;if(p.isPrimitive(t)||p.isPrimitive(n))return t===n;var e=c(t),r=c(n);if(e&&!r||!e&&r)return!1;if(e)return t=d.call(t),n=d.call(n),s(t,n);var i,o,a=v(t),u=v(n);if(a.length!=u.length)return!1;for(a.sort(),u.sort(),o=a.length-1;o>=0;o--)if(a[o]!=u[o])return!1;for(o=a.length-1;o>=0;o--)if(i=a[o],!s(t[i],n[i]))return!1;return!0}function f(t,n){return t&&n?"[object RegExp]"==Object.prototype.toString.call(n)?n.test(t):t instanceof n?!0:n.call({},t)===!0:!1}function h(t,n,e,r){var i;p.isString(e)&&(r=e,e=null);try{n()}catch(o){i=o}if(r=(e&&e.name?" ("+e.name+").":".")+(r?" "+r:"."),t&&!i&&a(i,e,"Missing expected exception"+r),!t&&f(i,e)&&a(i,e,"Got unwanted exception"+r),t&&i&&e&&!f(i,e)||!t&&i)throw i}var p=t("util/"),d=Array.prototype.slice,g=Object.prototype.hasOwnProperty,m=n.exports=u;m.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var n=t.stackStartFunction||a;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var e=new Error;if(e.stack){var r=e.stack,i=n.name,u=r.indexOf("\n"+i);if(u>=0){var s=r.indexOf("\n",u+1);r=r.substring(s+1)}this.stack=r}}},p.inherits(m.AssertionError,Error),m.fail=a,m.ok=u,m.equal=function(t,n,e){t!=n&&a(t,n,e,"==",m.equal)},m.notEqual=function(t,n,e){t==n&&a(t,n,e,"!=",m.notEqual)},m.deepEqual=function(t,n,e){s(t,n)||a(t,n,e,"deepEqual",m.deepEqual)},m.notDeepEqual=function(t,n,e){s(t,n)&&a(t,n,e,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(t,n,e){t!==n&&a(t,n,e,"===",m.strictEqual)},m.notStrictEqual=function(t,n,e){t===n&&a(t,n,e,"!==",m.notStrictEqual)},m["throws"]=function(t,n,e){h.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(t,n){h.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(t){if(t)throw t};var v=Object.keys||function(t){var n=[];for(var e in t)g.call(t,e)&&n.push(e);return n}},{"util/":13}],6:[function(t,n,e){(function(n){"use strict";function r(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,n){if(i()<n)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=a.prototype):(null===t&&(t=new a(n)),t.length=n),t}function a(t,n,e){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,n,e);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,n,e)}function u(t,n,e,r){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer?p(t,n,e,r):"string"==typeof n?f(t,n,e):d(t,n)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number')}function c(t,n,e,r){return s(n),0>=n?o(t,n):void 0!==e?"string"==typeof r?o(t,n).fill(e,r):o(t,n).fill(e):o(t,n)}function l(t,n){if(s(n),t=o(t,0>n?0:0|g(n)),!a.TYPED_ARRAY_SUPPORT)for(var e=0;n>e;e++)t[e]=0;return t}function f(t,n,e){if("string"==typeof e&&""!==e||(e="utf8"),!a.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(n,e);return t=o(t,r),t.write(n,e),t}function h(t,n){var e=0|g(n.length);t=o(t,e);for(var r=0;e>r;r+=1)t[r]=255&n[r];return t}function p(t,n,e,r){if(n.byteLength,0>e||n.byteLength<e)throw new RangeError("'offset' is out of bounds");if(n.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===r?new Uint8Array(n,e):new Uint8Array(n,e,r),a.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=a.prototype):t=h(t,n),t}function d(t,n){if(a.isBuffer(n)){var e=0|g(n.length);return t=o(t,e),0===t.length?t:(n.copy(t,0,0,e),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||Z(n.length)?o(t,0):h(t,n);if("Buffer"===n.type&&X(n.data))return h(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function m(t){return+t!=t&&(t=0),a.alloc(+t)}function v(t,n){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var r=!1;;)switch(n){case"ascii":case"binary":case"raw":case"raws":return e;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return H(t).length;default:if(r)return q(t).length;n=(""+n).toLowerCase(),r=!0}}function y(t,n,e){var r=!1;if((void 0===n||0>n)&&(n=0),n>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),0>=e)return"";if(e>>>=0,n>>>=0,n>=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,n,e);case"utf8":case"utf-8":return R(this,n,e);case"ascii":return T(this,n,e);case"binary":return I(this,n,e);case"base64":return M(this,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,n,e);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function b(t,n,e,r){function i(t,n){return 1===o?t[n]:t.readUInt16BE(n*o)}var o=1,a=t.length,u=n.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||n.length<2)return-1;o=2,a/=2,u/=2,e/=2}for(var s=-1,c=0;a>e+c;c++)if(i(t,e+c)===i(n,-1===s?0:c-s)){if(-1===s&&(s=c),c-s+1===u)return(e+s)*o}else-1!==s&&(c-=c-s),s=-1;return-1}function E(t,n,e,r){e=Number(e)||0;var i=t.length-e;r?(r=Number(r),r>i&&(r=i)):r=i;var o=n.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var u=parseInt(n.substr(2*a,2),16);if(isNaN(u))return a;t[e+a]=u}return a}function A(t,n,e,r){return V(q(n,t.length-e),t,e,r)}function x(t,n,e,r){return V(K(n),t,e,r)}function O(t,n,e,r){return x(t,n,e,r)}function _(t,n,e,r){return V(H(n),t,e,r)}function S(t,n,e,r){return V(G(n,t.length-e),t,e,r)}function M(t,n,e){return 0===n&&e===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(n,e))}function R(t,n,e){e=Math.min(t.length,e);for(var r=[],i=n;e>i;){var o=t[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(e>=i+u){var s,c,l,f;switch(u){case 1:128>o&&(a=o);break;case 2:s=t[i+1],128===(192&s)&&(f=(31&o)<<6|63&s,f>127&&(a=f));break;case 3:s=t[i+1],c=t[i+2],128===(192&s)&&128===(192&c)&&(f=(15&o)<<12|(63&s)<<6|63&c,f>2047&&(55296>f||f>57343)&&(a=f));break;case 4:s=t[i+1],c=t[i+2],l=t[i+3],128===(192&s)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&s)<<12|(63&c)<<6|63&l,f>65535&&1114112>f&&(a=f))}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=u}return C(r)}function C(t){var n=t.length;if(Q>=n)return String.fromCharCode.apply(String,t);for(var e="",r=0;n>r;)e+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return e}function T(t,n,e){var r="";e=Math.min(t.length,e);for(var i=n;e>i;i++)r+=String.fromCharCode(127&t[i]);return r}function I(t,n,e){var r="";e=Math.min(t.length,e);for(var i=n;e>i;i++)r+=String.fromCharCode(t[i]);return r}function j(t,n,e){var r=t.length;(!n||0>n)&&(n=0),(!e||0>e||e>r)&&(e=r);for(var i="",o=n;e>o;o++)i+=Y(t[o]);return i}function P(t,n,e){for(var r=t.slice(n,e),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(t,n,e){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+n>e)throw new RangeError("Trying to access beyond buffer length")}function B(t,n,e,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||o>n)throw new RangeError('"value" argument is out of bounds');if(e+r>t.length)throw new RangeError("Index out of range")}function k(t,n,e,r){0>n&&(n=65535+n+1);for(var i=0,o=Math.min(t.length-e,2);o>i;i++)t[e+i]=(n&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,n,e,r){0>n&&(n=4294967295+n+1);for(var i=0,o=Math.min(t.length-e,4);o>i;i++)t[e+i]=n>>>8*(r?i:3-i)&255}function L(t,n,e,r,i,o){if(e+r>t.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range")}function $(t,n,e,r,i){return i||L(t,n,e,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,n,e,r,23,4),e+4}function N(t,n,e,r,i){return i||L(t,n,e,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,n,e,r,52,8),e+8}function F(t){if(t=z(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return 16>t?"0"+t.toString(16):t.toString(16)}function q(t,n){n=n||1/0;for(var e,r=t.length,i=null,o=[],a=0;r>a;a++){if(e=t.charCodeAt(a),e>55295&&57344>e){if(!i){if(e>56319){(n-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(n-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(56320>e){(n-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(n-=3)>-1&&o.push(239,191,189);if(i=null,128>e){if((n-=1)<0)break;o.push(e)}else if(2048>e){if((n-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(65536>e){if((n-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(1114112>e))throw new Error("Invalid code point");if((n-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function K(t){for(var n=[],e=0;e<t.length;e++)n.push(255&t.charCodeAt(e));return n}function G(t,n){for(var e,r,i,o=[],a=0;a<t.length&&!((n-=2)<0);a++)e=t.charCodeAt(a),r=e>>8,i=e%256,o.push(i),o.push(r);return o}function H(t){return W.toByteArray(F(t))}function V(t,n,e,r){for(var i=0;r>i&&!(i+e>=n.length||i>=t.length);i++)n[i+e]=t[i];return i}function Z(t){return t!==t}var W=t("base64-js"),J=t("ieee754"),X=t("isarray");e.Buffer=a,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=i(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,n,e){return u(null,t,n,e)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,n,e){return c(null,t,n,e)},a.allocUnsafe=function(t){return l(null,t)},a.allocUnsafeSlow=function(t){return l(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,n){if(!a.isBuffer(t)||!a.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var e=t.length,r=n.length,i=0,o=Math.min(e,r);o>i;++i)if(t[i]!==n[i]){e=t[i],r=n[i];break}return r>e?-1:e>r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,n){if(!X(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var e;if(void 0===n)for(n=0,e=0;e<t.length;e++)n+=t[e].length;var r=a.allocUnsafe(n),i=0;for(e=0;e<t.length;e++){var o=t[e];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;t>n;n+=2)w(this,n,n+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;t>n;n+=4)w(this,n,n+3),w(this,n+1,n+2);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):y.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,n,e,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===e&&(e=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),0>n||e>t.length||0>r||i>this.length)throw new RangeError("out of range index");if(r>=i&&n>=e)return 0;if(r>=i)return-1;if(n>=e)return 1;if(n>>>=0,e>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,u=e-n,s=Math.min(o,u),c=this.slice(r,i),l=t.slice(n,e),f=0;s>f;++f)if(c[f]!==l[f]){o=c[f],u=l[f];break}return u>o?-1:o>u?1:0},a.prototype.indexOf=function(t,n,e){if("string"==typeof n?(e=n,n=0):n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof t&&(t=a.from(t,e)),a.isBuffer(t))return 0===t.length?-1:b(this,t,n,e);if("number"==typeof t)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,n):b(this,[t],n,e);throw new TypeError("val must be string, number or Buffer")},a.prototype.includes=function(t,n,e){return-1!==this.indexOf(t,n,e)},a.prototype.write=function(t,n,e,r){if(void 0===n)r="utf8",e=this.length,n=0;else if(void 0===e&&"string"==typeof n)r=n,e=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n=0|n,isFinite(e)?(e=0|e,void 0===r&&(r="utf8")):(r=e,e=void 0)}var i=this.length-n;if((void 0===e||e>i)&&(e=i),t.length>0&&(0>e||0>n)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,t,n,e);case"utf8":case"utf-8":return A(this,t,n,e);case"ascii":return x(this,t,n,e);case"binary":return O(this,t,n,e);case"base64":return _(this,t,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n,e);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;a.prototype.slice=function(t,n){var e=this.length;t=~~t,n=void 0===n?e:~~n,0>t?(t+=e,0>t&&(t=0)):t>e&&(t=e),0>n?(n+=e,0>n&&(n=0)):n>e&&(n=e),t>n&&(n=t);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=a.prototype;else{var i=n-t;r=new a(i,void 0);for(var o=0;i>o;o++)r[o]=this[o+t]}return r},a.prototype.readUIntLE=function(t,n,e){t=0|t,n=0|n,e||U(t,n,this.length);for(var r=this[t],i=1,o=0;++o<n&&(i*=256);)r+=this[t+o]*i;return r},a.prototype.readUIntBE=function(t,n,e){t=0|t,n=0|n,e||U(t,n,this.length);for(var r=this[t+--n],i=1;n>0&&(i*=256);)r+=this[t+--n]*i;return r},a.prototype.readUInt8=function(t,n){return n||U(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,n){return n||U(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,n){return n||U(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,n){return n||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,n){return n||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,n,e){t=0|t,n=0|n,e||U(t,n,this.length);for(var r=this[t],i=1,o=0;++o<n&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*n)),r},a.prototype.readIntBE=function(t,n,e){t=0|t,n=0|n,e||U(t,n,this.length);for(var r=n,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*n)),o},a.prototype.readInt8=function(t,n){return n||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,n){n||U(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt16BE=function(t,n){n||U(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt32LE=function(t,n){return n||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,n){return n||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,n){return n||U(t,4,this.length),J.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,n){return n||U(t,4,this.length),J.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,n){return n||U(t,8,this.length),J.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,n){return n||U(t,8,this.length),J.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,n,e,r){if(t=+t,n=0|n,e=0|e,!r){var i=Math.pow(2,8*e)-1;B(this,t,n,e,i,0)}var o=1,a=0;for(this[n]=255&t;++a<e&&(o*=256);)this[n+a]=t/o&255;return n+e},a.prototype.writeUIntBE=function(t,n,e,r){if(t=+t,n=0|n,e=0|e,!r){var i=Math.pow(2,8*e)-1;B(this,t,n,e,i,0)}var o=e-1,a=1;for(this[n+o]=255&t;--o>=0&&(a*=256);)this[n+o]=t/a&255;return n+e},a.prototype.writeUInt8=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},a.prototype.writeUInt16LE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):k(this,t,n,!0),n+2},a.prototype.writeUInt16BE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):k(this,t,n,!1),n+2},a.prototype.writeUInt32LE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):D(this,t,n,!0),n+4},a.prototype.writeUInt32BE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):D(this,t,n,!1),n+4},a.prototype.writeIntLE=function(t,n,e,r){if(t=+t,n=0|n,!r){var i=Math.pow(2,8*e-1);B(this,t,n,e,i-1,-i)}var o=0,a=1,u=0;for(this[n]=255&t;++o<e&&(a*=256);)0>t&&0===u&&0!==this[n+o-1]&&(u=1),this[n+o]=(t/a>>0)-u&255;return n+e},a.prototype.writeIntBE=function(t,n,e,r){if(t=+t,n=0|n,!r){var i=Math.pow(2,8*e-1);B(this,t,n,e,i-1,-i)}var o=e-1,a=1,u=0;for(this[n+o]=255&t;--o>=0&&(a*=256);)0>t&&0===u&&0!==this[n+o+1]&&(u=1),this[n+o]=(t/a>>0)-u&255;return n+e},a.prototype.writeInt8=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=255&t,n+1},a.prototype.writeInt16LE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):k(this,t,n,!0),n+2},a.prototype.writeInt16BE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):k(this,t,n,!1),n+2},a.prototype.writeInt32LE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):D(this,t,n,!0),n+4},a.prototype.writeInt32BE=function(t,n,e){return t=+t,n=0|n,e||B(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):D(this,t,n,!1),n+4},a.prototype.writeFloatLE=function(t,n,e){return $(this,t,n,!0,e)},a.prototype.writeFloatBE=function(t,n,e){return $(this,t,n,!1,e)},a.prototype.writeDoubleLE=function(t,n,e){return N(this,t,n,!0,e)},a.prototype.writeDoubleBE=function(t,n,e){return N(this,t,n,!1,e)},a.prototype.copy=function(t,n,e,r){if(e||(e=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&e>r&&(r=e),r===e)return 0;if(0===t.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-e&&(r=t.length-n+e);var i,o=r-e;if(this===t&&n>e&&r>n)for(i=o-1;i>=0;i--)t[i+n]=this[i+e];else if(1e3>o||!a.TYPED_ARRAY_SUPPORT)for(i=0;o>i;i++)t[i+n]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),n);return o},a.prototype.fill=function(t,n,e,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,e=this.length):"string"==typeof e&&(r=e,e=this.length),1===t.length){var i=t.charCodeAt(0);256>i&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t=255&t);if(0>n||this.length<n||this.length<e)throw new RangeError("Out of range index");if(n>=e)return this;n>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0);var o;if("number"==typeof t)for(o=n;e>o;o++)this[o]=t;else{var u=a.isBuffer(t)?t:q(new a(t,r).toString()),s=u.length;for(o=0;e-n>o;o++)this[o+n]=u[o%s]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":7,ieee754:8,isarray:9}],7:[function(t,n,e){"use strict";function r(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,e=t.length;e>n;++n)s[n]=t[n],c[t.charCodeAt(n)]=n;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63}function i(t){var n,e,r,i,o,a,u=t.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[u-2]?2:"="===t[u-1]?1:0,a=new l(3*u/4-o),r=o>0?u-4:u;var s=0;for(n=0,e=0;r>n;n+=4,e+=3)i=c[t.charCodeAt(n)]<<18|c[t.charCodeAt(n+1)]<<12|c[t.charCodeAt(n+2)]<<6|c[t.charCodeAt(n+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=255&i;return 2===o?(i=c[t.charCodeAt(n)]<<2|c[t.charCodeAt(n+1)]>>4,a[s++]=255&i):1===o&&(i=c[t.charCodeAt(n)]<<10|c[t.charCodeAt(n+1)]<<4|c[t.charCodeAt(n+2)]>>2,a[s++]=i>>8&255,a[s++]=255&i),a}function o(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function a(t,n,e){for(var r,i=[],a=n;e>a;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(o(r));return i.join("")}function u(t){for(var n,e=t.length,r=e%3,i="",o=[],u=16383,c=0,l=e-r;l>c;c+=u)o.push(a(t,c,c+u>l?l:c+u));return 1===r?(n=t[e-1],i+=s[n>>2],i+=s[n<<4&63],i+="=="):2===r&&(n=(t[e-2]<<8)+t[e-1],i+=s[n>>10],i+=s[n>>4&63],i+=s[n<<2&63],i+="="),o.push(i),o.join("")}e.toByteArray=i,e.fromByteArray=u;var s=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array;r()},{}],8:[function(t,n,e){e.read=function(t,n,e,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=e?i-1:0,h=e?-1:1,p=t[n+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=u;l>0;o=256*o+t[n+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[n+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,n,e,r,i,o){var a,u,s,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=0>n||0===n&&0>1/n?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,a=l):(a=Math.floor(Math.log(n)/Math.LN2),n*(s=Math.pow(2,-a))<1&&(a--,s*=2),n+=a+f>=1?h/s:h*Math.pow(2,1-f),n*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(n*s-1)*Math.pow(2,i),a+=f):(u=n*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[e+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;t[e+p]=255&a,p+=d,a/=256,c-=8);t[e+p-d]|=128*g}},{}],9:[function(t,n,e){var r={}.toString;n.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],10:[function(t,n,e){"function"==typeof Object.create?n.exports=function(t,n){
t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},{}],11:[function(t,n,e){function r(){l=!1,u.length?c=u.concat(c):f=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(r);l=!0;for(var n=c.length;n;){for(u=c,c=[];++f<n;)u&&u[f].run();f=-1,n=c.length}u=null,l=!1,clearTimeout(t)}}function o(t,n){this.fun=t,this.array=n}function a(){}var u,s=n.exports={},c=[],l=!1,f=-1;s.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new o(t,n)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],12:[function(t,n,e){n.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],13:[function(t,n,e){(function(n,r){function i(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&e._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),s(r,t,r.depth)}function o(t,n){var e=i.styles[n];return e?"["+i.colors[e][0]+"m"+t+"["+i.colors[e][1]+"m":t}function a(t,n){return t}function u(t){var n={};return t.forEach(function(t,e){n[t]=!0}),n}function s(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return w(i)||(i=s(t,i,r)),i}var o=c(t,n);if(o)return o;var a=Object.keys(n),g=u(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),_(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(S(n)){var m=n.name?": "+n.name:"";return t.stylize("[Function"+m+"]","special")}if(A(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return l(n)}var v="",y=!1,b=["{","}"];if(d(n)&&(y=!0,b=["[","]"]),S(n)){var E=n.name?": "+n.name:"";v=" [Function"+E+"]"}if(A(n)&&(v=" "+RegExp.prototype.toString.call(n)),O(n)&&(v=" "+Date.prototype.toUTCString.call(n)),_(n)&&(v=" "+l(n)),0===a.length&&(!y||0==n.length))return b[0]+v+b[1];if(0>r)return A(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var x;return x=y?f(t,n,r,g,a):a.map(function(e){return h(t,n,r,g,e,y)}),t.seen.pop(),p(x,v,b)}function c(t,n){if(E(n))return t.stylize("undefined","undefined");if(w(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}return y(n)?t.stylize(""+n,"number"):g(n)?t.stylize(""+n,"boolean"):m(n)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,n,e,r,i){for(var o=[],a=0,u=n.length;u>a;++a)I(n,String(a))?o.push(h(t,n,e,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,n,e,r,i,!0))}),o}function h(t,n,e,r,i,o){var a,u,c;if(c=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]},c.get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),I(r,i)||(a="["+i+"]"),u||(t.seen.indexOf(c.value)<0?(u=m(e)?s(t,c.value,null):s(t,c.value,e-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),E(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function p(t,n,e){var r=0,i=t.reduce(function(t,n){return r++,n.indexOf("\n")>=0&&r++,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1]:e[0]+n+" "+t.join(", ")+" "+e[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function m(t){return null===t}function v(t){return null==t}function y(t){return"number"==typeof t}function w(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function E(t){return void 0===t}function A(t){return x(t)&&"[object RegExp]"===R(t)}function x(t){return"object"==typeof t&&null!==t}function O(t){return x(t)&&"[object Date]"===R(t)}function _(t){return x(t)&&("[object Error]"===R(t)||t instanceof Error)}function S(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function R(t){return Object.prototype.toString.call(t)}function C(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,n=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),B[t.getMonth()],n].join(" ")}function I(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var j=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(i(arguments[e]));return n.join(" ")}for(var e=1,r=arguments,o=r.length,a=String(t).replace(j,function(t){if("%%"===t)return"%";if(e>=o)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(n){return"[Circular]"}default:return t}}),u=r[e];o>e;u=r[++e])a+=m(u)||!x(u)?" "+u:" "+i(u);return a},e.deprecate=function(t,i){function o(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(E(r.process))return function(){return e.deprecate(t,i).apply(this,arguments)};if(n.noDeprecation===!0)return t;var a=!1;return o};var P,U={};e.debuglog=function(t){if(E(P)&&(P=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!U[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var r=n.pid;U[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else U[t]=function(){};return U[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=g,e.isNull=m,e.isNullOrUndefined=v,e.isNumber=y,e.isString=w,e.isSymbol=b,e.isUndefined=E,e.isRegExp=A,e.isObject=x,e.isDate=O,e.isError=_,e.isFunction=S,e.isPrimitive=M,e.isBuffer=t("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",T(),e.format.apply(e,arguments))},e.inherits=t("inherits"),e._extend=function(t,n){if(!n||!x(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":12,_process:11,inherits:10}],14:[function(t,n,e){n.exports.note=t("./lib/note"),n.exports.chord=t("./lib/chord"),n.exports.scale=t("./lib/scale"),n.exports.improv=t("./lib/improv"),n.exports.midi=t("./lib/midi")},{"./lib/chord":15,"./lib/improv":16,"./lib/midi":18,"./lib/note":19,"./lib/scale":20}],15:[function(t,n,e){var r=t("./note"),i=t("./interval"),o=t("./scale"),a=t("./midi"),u=t("underscore"),s=function(t){var n,e="[A-Ga-g][#b]{0,2}",i=t.match(new RegExp("^"+e))[0],o=null;return i=r.create(i),n=t.replace(/[\s]/g,"").replace(new RegExp("^"+e),"").replace(new RegExp("/"+e+"$"),""),n=n||"M",o=t.match(new RegExp("/"+e+"$")),o&&(o=r.create(o[0].slice(1))),{root:i,symbol:n,bass:o}},c=function(t){return t.replace(/maj/i,"M").replace(/min/i,"m").replace(/^-/,"m").replace(/dom/,"")},l=function(t,n){return t.slice(n).concat(t.slice(0,n))},f=function(t){var n=[];return n[1]="P",n[3]="M",n[5]="P",/^(m|dim|1\/2dim)/.test(t)&&(n[3]="m"),/(dim|[-b]5)/.test(t)&&(n[5]="dim"),(/^(aug|\+)/.test(t)||/[+#]5/.test(t))&&(n[5]="aug"),(/^[5n]/.test(t)||/no3/.test(t))&&(n[3]=""),/(7|9|11|13)/.test(t)&&(n[7]="m"),/(M7|M9|M11|M13)/.test(t)&&(n[7]="M"),/(dim7|dim9|dim11|dim13)/.test(t)&&!/1\/2dim/.test(t)&&(n[7]="dim"),/6/.test(t)&&(n[6]="M",n[7]=""),/sus2/.test(t)?(n[2]="M",n[3]=""):/sus/.test(t)&&(n[4]="P",n[3]=""),/[+#]9/.test(t)?n[9]="aug":/[-b]9/.test(t)?n[9]="m":/add9/.test(t)?(n[9]="M",/7/.test(t)||(n[7]="")):/9/.test(t)&&(n[9]="M"),/[+#]11/.test(t)?n[11]="aug":/[-b]11/.test(t)?n[11]="dim":/add11/.test(t)?(n[11]="P",/7|9/.test(t)||(n[7]="")):/11/.test(t)&&(n[11]="P",n[9]="M"),/[-b]13/.test(t)?n[13]="m":/add13/.test(t)?(n[13]="M",/7|9|11/.test(t)||(n[7]="")):/13/.test(t)&&(n[13]="M",n[11]="P",n[9]="M"),n},h=function(t){var n=t.root,e=t.bass,r=t.notes,i=!0,o=function(t){return u.find(r,function(e){return n.transpose(t).enharmonic(e)})},a=n.name;return o("M3")?!o("aug5")||o("M7")||o("m7")||(a+="+"):a+=o("m3")?!o("dim5")||o("P5")||o("M7")?"m":o("dim7")?"dim7":o("m7")?"m":"dim":o("P4")?"sus4":o("M2")?"sus2":"n",o("M7")||o("m7")?(o("M7")&&(a+="M"),a+=o("M6")?"13":o("P4")&&(o("M3")||o("m3"))?"11":o("M2")&&(o("M3")||o("m3"))?"9":"7"):(o("M3")||o("m3"))&&(o("M6")&&!o("dim5")&&(a+="6",o("M2")&&(a+="/9")),o("P4")&&(a+="add11"),!o("M6")&&o("M2")&&(a+="add9")),(o("M3")||o("m3"))&&o("dim5")&&!o("P5")&&(o("M7")||o("m7"))&&(a+="b5"),o("M3")&&o("aug5")&&!o("P5")&&(o("M7")||o("m7"))&&(a+="#5"),o("m2")&&(a+="b9"),o("M3")&&o("aug2")&&(a+="#9"),(o("M3")||o("m3"))&&o("dim5")&&o("P5")&&(o("M7")||o("m7"))&&(a+="#11"),(o("M3")||o("m3"))&&o("m6")&&o("P5")&&(o("M7")||o("m7"))&&(a+="b13"),"n"===a.slice(-1)&&(a=a.slice(0,-1)+"5"),n.enharmonic(e)||(a+="/"+e.name),a.match(/b5|#5|dim/)||o("P5")||(i=!1),(o("P5")||o("dim5"))&&o("m3")&&o("m6")&&!o("m7")&&!o("M7")&&(i=!1),{symbol:a,reasonable:i}},p=function(){var t=u.map(arguments,function(t){return r.create(t)}),n=u.map(t,function(n,e){var r=l(t,e);return{root:n,bass:t[0],notes:r.slice(1)}}),e=u.map(n,h),i=u.find(e,function(t){return t.reasonable}),o=i?i.symbol:e[0].symbol;return o},d=function(t,n,e){var r,o=u.chain(e).map(function(n,e){var r;return n?(r=i.create(e,n),t.transpose(r)):void 0}).compact().value();return n&&!t.enharmonic(n)&&(r=u.findIndex(o,n.enharmonic.bind(n)),r>-1?o=l(o,r):o.unshift(n)),o},g=function(t,n,e){var r=t.name+n;return e&&(r+="/"+e.name),new y(r)},m=function(t,n){var e=function(n){t=u.filter(t,function(t){return!t.hasInterval(n)})},r=function(e,r){t.splice(e,0,o.create(n.root,r))};return u.includes(["m","m6","m7","m9","m11","m13"],n.symbol)&&e("M3"),u.includes(["7","9","11","13","m7","m9","m11","m13"],n.symbol)&&e("M7"),u.includes(["M7","M9","M11","M13"],n.symbol)&&e("m7"),"6"!==n.symbol[0]&&"M6"!==n.symbol.slice(0,2)||e("m7"),u.includes(["7","7#9","7+9","7#11","7+11"],n.symbol)&&r(2,"blues"),t},v=function(t,n){var e=t[0],i=e;return u.map(t,function(t){return t.lowerThan(i)&&(n+=1),i=t,r.create(t,n)})},y=function(t,n){var e;this.name=t,t=s(t),this.root=t.root,this.symbol=c(t.symbol),this.bass=t.bass,e=f(this.symbol),this.chord=d(this.root,this.bass,e),this.octave=null,n&&(this.octave=n,this.chord=v(this.chord,n)),this.toString=function(){return this.chord.join(" ")}},w=function(t,n){return t instanceof y?new y(t.name,t.octave||n):new y(t,n)},b=function(t){this.chart=u.map(t,function(t){return{chord:w(t[0]),duration:{beats:t[1]}}}),this.midi=function(t){return a.create("chordChart",this,t)}},E=function(t){return t instanceof b?t:new b(t)};y.prototype.scales=function(){var t=this.root,n=this.chord,e=u.map(o.precedence,function(n){return o.create(t,n)});return e=u.filter(e,function(t){return u.every(n,t.contains.bind(t))}),m(e,this)},y.prototype.scale=function(){return this.scales()[0]},y.prototype.scaleNames=function(){return u.pluck(this.scales(),"name")},y.prototype.transpose=function(t,n){var e=this.root.transpose(t,n),r=this.bass?this.bass.transpose(t,n):null;return g(e,this.symbol,r)},y.prototype.transposeDown=u.partial(y.prototype.transpose,u,!0),y.prototype.clean=function(){var t=this.root.clean(),n=this.bass?this.bass.clean():null,e=g(t,this.symbol,n);return e.chord=u.map(e.chord,function(t){return t.clean()}),e},y.prototype.contains=function(t){return r.create(t).containedIn(this.chord)},y.prototype.hasInterval=function(t){return r.create(this.root).transpose(t).containedIn(this.chord)},y.prototype.inOctave=function(t){return new y(this.name,t)},n.exports.identify=p,n.exports.create=w,n.exports.createChart=E},{"./interval":17,"./midi":18,"./note":19,"./scale":20,underscore:28}],16:[function(t,n,e){var r=(t("./scale"),t("./chord")),i=t("./note"),o=t("./midi"),a=t("underscore"),u=t("random-js")(),s=function(t,n,e){var r,o=t.scales(),a=Math.floor(-2*e.dissonance*Math.log(u.real(0,1))),s=o[a%o.length];for(n=n||i.random(e.range),s=s.traverse(s.nearest(n));!s.current().inRange(e.range);)r=s.current().lowerThan(e.range[0])?1:-1,s=s.shift(r);return s},c=function(t){return t.useSixteenths&&u.bool(2*t.rhythmicVariety/3)?u.bool()?3:4:!t.useSixteenths&&u.bool(t.rhythmicVariety/2)?3:2},l=function(t,n,e,r){var i={notes:[],dir:n},o=2===e||!r.onlyEighthRests;return a.times(e,function(){var n=i.dir;if(o&&u.bool(r.rests))return i.notes.push(null);if(u.bool(r.jumpiness)){do t=t.random();while(!t.current().inRange(r.range));return i.notes.push(t.current()),i}u.bool(r.changeDir)&&(n=-n),t=t.shift(n),t.current().inRange(r.range)||(n=-n,t=t.shift(2*n)),i.notes.push(t.current()),i.dir=n}),i},f=function(t){return a.reduce(t,function(t,n){return t+n[1]},0)},h=function(t,n){var e=[],i=null,o=u.pick([-1,1]),h=f(t),p={};return t=r.createChart(t),a.each(["dissonance","changeDir","jumpiness","rests","rhythmicVariety"],function(t){n[t]instanceof Array?(p[t]=(n[t][1]-n[t][0])/h,n[t]=n[t][0]):p[t]=0}),a.each(t.chart,function(t){var r=t.chord,u=t.duration.beats,f=s(r,i,n),h={chord:r,scale:f,notes:[],duration:{beats:u}};a.times(u,function(){var t=l(f,o,c(n),n);h.notes.push(t.notes),o=t.dir,i=a.last(a.filter(t.notes,a.identity)),i&&(f=f.withCurrent(i)),a.each(p,function(t,e){n[e]+=t})}),e.push(h)}),new g(e)},p=function(t){var n={dissonance:.5,changeDir:.25,jumpiness:.25,rests:[.35,0],rhythmicVariety:[0,.75],useSixteenths:!0,onlyEighthRests:!1,range:["C4","C6"]};this.settings=a.defaults(t||{},n)},d=function(t){var n=a.reduce(t,function(t,n){return t.concat(n.notes)},[]);return a.flatten(a.map(n,function(t){return a.map(t,function(n,e){var r={};return 2===t.length&&0===e&&(r.type="longEighth"),2===t.length&&1===e&&(r.type="shortEighth"),3===t.length&&(r.type="triplet"),4===t.length&&(r.type="sixteenth"),{note:n,duration:r}})}))},g=function(t){this.chart=t,this.noteList=d(t),this.midi=function(t){return o.create("improvChart",this,t)},this.toString=function(){return a.map(t,function(t){return"("+t.chord.name+" => "+t.scale.name+") "+a.map(t.notes,function(t){return a.map(t,function(t){return t||"_"}).join(" ")}).join(" | ")}).join("\n")}};p.prototype.over=function(t,n){switch(t){case"chart":case"chordChart":return h(n,this.settings);default:throw new Error("Cannot improvise over: "+t)}},n.exports.create=function(t){return new p(t)},n.exports.isImprovChart=function(t){return t instanceof g}},{"./chord":15,"./midi":18,"./note":19,"./scale":20,"random-js":23,underscore:28}],17:[function(t,n,e){var r=[null,"Unison","Second","Third","Fourth","Fifth","Sixth","Seventh","Octave","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth"],i={M:"Major",m:"Minor",P:"Perfect",dim:"Diminished",aug:"Augmented"},o={P:"P",M:"m",dim:"aug",m:"M",aug:"dim"},a=[null,0,2,4,5,7,9,11],u={dim:-1,P:0,aug:1},s={dim:-2,m:-1,M:0,aug:1},c=function(t){return[1,4,5,8,11,12].indexOf(t)>-1},l=function(t,n){var e=c(t)&&["M","m"].indexOf(n)>-1,r=!c(t)&&"P"===n;if(e||r||t>14||1>t)throw new Error("Invalid interval: "+n+t)},f=function(t){return t.replace(/^A$/,"aug").replace(/^d$/,"dim").replace(/^maj$/,"M").replace(/^min$/,"m").replace(/^perf$/,"P")},h=function(t){var n,e;return t instanceof p?t:(n=t.replace(/\d/g,""),e=parseInt(t.replace(/\D/g,""),10),n||(n=c(e)?"P":"M"),new p(e,n))},p=function(t,n){n=f(n),l(t,n),this.number=t,this.quality=n,this.name=n+t,this.fullName=i[n]+" "+r[t],this.toString=function(){return this.name}};p.prototype.invert=function(){var t,n=o[this.quality];return t=1===this.number||8===this.number?this.number:this.number<8?9-this.number:23-this.number,new p(t,n)},p.prototype.halfSteps=function(){var t=c(this.number)?u:s,n=this.number>7?this.number-7:this.number;return a[n]+t[this.quality]},n.exports.parse=h,n.exports.isPerfect=c,n.exports.create=function(t,n){return new p(t,n)}},{}],18:[function(t,n,e){(function(e){var r=t("./note"),i=t("underscore"),o=t("fs"),a=new e([77,84,104,100]),u=new e([77,84,114,107]),s=new e([0,255,47,0]),c=96,l=function(t,n){var r=Math.floor(Math.log(t)/Math.log(255))+1,i=new e(n);return i.fill(0),i.writeUIntBE(t,n-r,r),i},f=function(t){var n=[];if(0===t)return new e([0]);for(;t;)n.unshift(127&t),t>>=7;return n=i.map(i.initial(n),function(t,n){return t+128}).concat(i.last(n)),new e(n)},h=function(t,n){var r=l(6,4),i=l(n,2),o=l(c,2);return t=l(t,2),e.concat([a,r,t,i,o])},p=function(t){var n=6e7/t.tempo,r=e.concat([new e([0,255,81,3]),l(n,3)]),i=r.length+s.length;return e.concat([u,l(i,4),r,s])},d=function(t,n){return new e([0,192+t,n-1])},g=function(t,n,r,i,o){var a=n?144:128;return a+=r,t=f(t),e.concat([t,new e([a,i,o])])},m=function(t,n,r,o,a){var u=[];return u.push(g(t,n,r,y(i.first(o)),a)),i.each(i.rest(o),function(t,e){u.push(g(0,n,e+r,y(t),a))}),e.concat(u)},v=function(t,n){var e=n&&n.swingRatio?n.swingRatio:1,r=t.beats?t.beats*c:0,o=t.type?Array.prototype.concat(t.type):[];return i.reduce(o,function(t,n){switch(n){case"longEighth":return t+Math.ceil(c-c/(e+1));case"shortEighth":return t+Math.floor(c/(e+1));case"eighth":return t+c/2;case"triplet":return t+c/3;case"sixteenth":return t+c/4;default:return t}},r)},y=function(t){var n=12*t.clean().octave;return n+r.create("C").getHalfSteps(t)},w=function(t,n){var r=0,o=i.reduce(t,function(t,e){var i=v(e.duration,n);return e.note?(t.push(g(r,!0,0,y(e.note),n.noteVelocity)),t.push(g(i,!1,0,y(e.note),n.noteVelocity)),r=0):r+=i,t},[]);return e.concat(o)},b=function(t,n){var r=i.reduce(t,function(t,e){var r=v(e.duration,n),i=e.chord.inOctave(n.chordOctave).chord;return t.push(m(0,!0,1,i,n.chordVelocity)),t.push(m(r,!1,1,i,n.chordVelocity)),t},[]);return e.concat(r)},E=function(t,n){var r=w(t,n),i=d(0,n.melodyPatch),o=i.length+r.length+s.length;return e.concat([u,l(o,4),i,r,s])},A=function(t,n){var r=b(t,n),o=i.reduce(i.range(15),function(t,r){return e.concat([t,d(r,n.chordPatch)])},new e(0)),a=o.length+r.length+s.length;return e.concat([u,l(a,4),o,r,s])},x=function(t,n){var r=h(1,3),i=p(n),o=E(t.noteList,n),a=A(t.chart,n);return e.concat([r,i,o,a])},O=function(t,n){var r=h(1,2),i=p(n),o=A(t.chart,n);return e.concat([r,i,o])};n.exports.noteLength=v,n.exports.makeVLQ=f,n.exports.noteValue=y;var _=function(t,n,e){var r={improvChart:x,chordChart:O};this.type=t,this.source=n,this.settings=i.defaults(e||{},{tempo:120,swingRatio:1.5,melodyPatch:57,chordPatch:1,noteVelocity:80,chordVelocity:60,chordOctave:4}),this.data=r[t]?r[t](n,this.settings):null};_.prototype.write=function(t,n){o.open(t,"w",function(t,e){t&&n(t),o.write(e,this.data,0,this.data.length,n)})},_.prototype.writeSync=function(t){o.writeSync(o.openSync(t,"w"),this.data,0,this.data.length)},n.exports.create=function(t,n,e){return new _(t,n,e)}}).call(this,t("buffer").Buffer)},{"./note":19,buffer:6,fs:4,underscore:28}],19:[function(t,n,e){var r=t("./interval"),i=t("assert"),o=t("mod-loop"),a=t("underscore"),u=t("random-js")(),s=["C","D","E","F","G","A","B"],c={C:0,D:2,E:4,F:5,G:7,A:9,B:11,"C#":1,Db:1,"D#":3,Eb:3,"F#":6,Gb:6,"G#":8,Ab:8,"A#":10,Bb:10},l={"-1":"dim",0:"P",1:"aug"},f={"-2":"dim","-1":"m",0:"M",1:"aug"},h=["b","n","#"],p=["G","D","A","E","B","F#","C#"],d=["F","Bb","Eb","Ab","Db","Gb","Cb"],g=function(t){var n=null;if(t=t.replace(/[\s]/g,""),t=t.replace("x","##").replace("s","#"),/\d$/.test(t)&&(n=parseInt(t.slice(-1)),t=t.slice(0,-1)),!/^[A-Ga-g](bb|##|[b#n])?$/.test(t))throw new Error("Invalid note name:  "+t);return{letter:t[0].toUpperCase(),acc:t.slice(1)||"n",octave:n}},m=function(t,n){var e=(t.letter,s.indexOf(t.letter)),r=o(e+n-1,s.length);return i(e>-1),i(r>-1&&r<s.length),s[r]},v=function(t,n){var e=s.indexOf(t),r=s.indexOf(n),a=o(r-e,s.length)+1;return i(e>-1),i(r>-1),i(a>0&&a<=s.length),a},y=function(t,n){return o(c[n]-c[t],12)},w=function(t){return t=o(t-1,s.length),c[s[t]]},b=function(t){var n=r.isPerfect(t.number)?l:f,e=a.invert(n)[t.quality];return parseInt(e,10)},E=function(t,n){var e=w(t),r=n-e;return 11===r&&(r=-1),-11===r&&(r=1),r},A=function(t){return t instanceof x},x=function(t,n){if(t=g(t),this.letter=t.letter,this.acc=this.accidental=t.acc,this.octave=n||t.octave,this.octave&&this.octave<0||this.octave>9)throw new Error("Invalid octave number: "+n);this.name=this.letter+("n"===this.acc?"":this.acc),this.toString=function(){return this.octave?this.name+this.octave:this.name},this.keyType=null,a.contains(p,this.name)&&(this.keyType="#"),a.contains(d,this.name)&&(this.keyType="b")},O=function(t,n){return A(t)?new x(t.name,n||t.octave):new x(t,n)};x.prototype.sharp=function(){var t=this.octave;switch(this.acc){case"b":return new x(this.letter,t);case"##":return t&&"B"===this.letter&&(t+=1),"B"===this.letter||"E"===this.letter?new x(m(this,2)+"##",t):new x(m(this,2)+"#",t);case"bb":return new x(this.letter+"b",t);default:return new x(this.name+"#",t)}},x.prototype.flat=function(){var t=this.octave;switch(this.accidental){case"#":return new x(this.letter,t);case"bb":return t&&"C"===this.letter&&(t-=1),"C"===this.letter||"F"===this.letter?new x(m(this,7)+"bb",t):new x(m(this,7)+"b",t);case"##":return new x(this.letter+"#",t);default:return new x(this.name+"b",t)}},x.prototype.shift=function(t){var n,e,r=this;return n=0>t?"flat":"sharp",e=Math.abs(t),a.times(e,function(){r=r[n]()}),r},x.prototype.clean=function(){var t=this.octave,n=this.name;return t&&("B#"===this.name.slice(0,2)&&(t+=1),"Cb"===this.name.slice(0,2)&&(t-=1)),n=n.replace("B#","C"),n=n.replace("E#","F"),n=n.replace("Cb","B"),n=n.replace("Fb","E"),"##"===n.slice(1)&&(n=m(this,2)),"bb"===n.slice(1)&&(n=m(this,7)),new x(n,t)},x.prototype.getInterval=function(t){var n,e,i,o;if("bb"===this.accidental||"##"===this.accidental)throw new Error("Can't use double sharp or double flat as base key.");if(t=O(t),n=v(this.letter,t.letter),i=y(this.clean().name,t.clean().name),o=E(n,i),e=r.isPerfect(n)?l[o]:f[o],!e)throw new Error("Invalid interval");return r.create(n,e)},x.prototype.transpose=function(t,n){var e,o,a;if("bb"===this.accidental||"##"===this.accidental)throw new Error("Can't use double sharp or double flat as base key.");return t=r.parse(t),n&&(t=t.invert()),e=new x(m(this,t.number),this.octave),o=y(this.clean().name,e.name),a=-E(t.number,o),a+=b(t),i(isFinite(a)),e=e.shift(a),e.octave&&(n?(this.lowerThan(e)&&(e.octave-=1),t.number>7&&(e.octave-=1)):(this.higherThan(e)&&(e.octave+=1),t.number>7&&(e.octave+=1))),e},x.prototype.transposeDown=a.partial(x.prototype.transpose,a,!0),x.prototype.toggleAccidental=function(){return"#"===this.acc?this.transpose("dim2"):"b"===this.acc?this.transpose("aug7"):this.clean()},x.prototype.enharmonic=function(t){return t=O(t),c[this.clean().name]===c[t.clean().name]},x.prototype.lowerThan=function(t){if(t=O(t),this.octave&&t.octave){if(this.octave<t.octave)return!0;if(this.octave>t.octave)return!1}return this.enharmonic(t)?!1:this.letter===t.letter?h.indexOf(this.acc)<h.indexOf(t.acc):s.indexOf(this.letter)<s.indexOf(t.letter)},x.prototype.higherThan=function(t){var n;return t=O(t),n=this.enharmonic(t),n=n&&(!this.octave||!t.octave||this.octave===t.octave),!n&&!this.lowerThan(t)},x.prototype.getHalfSteps=function(t){var n,e;t=O(t),n=this.clean(),e=t.clean();try{return n.getInterval(e).halfSteps()}catch(r){try{return n.toggleAccidental().getInterval(e).halfSteps()}catch(i){return n.getInterval(e.toggleAccidental()).halfSteps()}}},x.prototype.containedIn=function(t){return a.some(t,function(t){return t.enharmonic(this)?!t.octave||!this.octave||t.octave===this.octave:void 0},this)},x.prototype.inRange=function(t){return!this.lowerThan(t[0])&&!this.higherThan(t[1])},n.exports.random=function(t){var n;if(lower=O(t[0]),upper=O(t[1]),!lower.octave||!upper.octave)throw new Error("Given range must have octave numbers");if(lower.enharmonic(upper)&&lower.octave===upper.octave)return lower;if(!lower.lowerThan(upper))throw new Error("Lower bound must be lower than upper bound");do n=new x("C").shift(u.integer(0,11)).clean(),n.octave=u.integer(lower.octave,upper.octave);while(!n.inRange([lower,upper]));return n},n.exports.create=O},{"./interval":17,assert:5,"mod-loop":22,"random-js":23,underscore:28}],20:[function(t,n,e){var r=t("./note"),i=t("./interval"),o=t("capitalize"),a=t("underscore"),u=t("mod-loop"),s={major:["2","3","4","5","6","7"],natural_minor:["2","m3","4","5","m6","m7"],harmonic_minor:["2","m3","4","5","m6","7"],melodic_minor:["2","m3","4","5","6","7"],dorian:["2","m3","4","5","6","m7"],phrygian:["m2","m3","4","5","m6","m7"],lydian:["2","3","aug4","5","6","7"],mixolydian:["2","3","4","5","6","m7"],locrian:["m2","m3","4","dim5","m6","m7"],whole_tone:["2","3","aug4","aug5","aug6"],blues:["m3","4","aug4","5","m7"],pentatonic:["2","3","5","6"],minor_pentatonic:["m3","4","5","m7"],diminished:["m2","m3","3","dim5","5","6","m7"],whole_half:["2","m3","4","dim5","m6","6","7"],dorian_b2:["m2","m3","4","5","6","m7"],lydian_augmented:["2","3","aug4","aug5","6","7"],lydian_dominant:["2","3","aug4","5","6","m7"],mixolydian_b6:["2","3","4","5","m6","m7"],half_diminished:["2","m3","4","dim5","m6","m7"],altered:["m2","m3","dim4","dim5","m6","m7"],augmented:["m3","3","5","aug5","7"],bebop_dominant:["2","3","4","5","6","m7","7"],bebop_major:["2","3","4","5","m6","6","7"],bebop_minor:["2","m3","4","5","m6","6","m7"],bebop_dorian:["2","m3","3","4","5","6","m7"],major_blues:["2","m3","3","5","6"]},c=["major","dorian","natural_minor","mixolydian","bebop_dominant","bebop_dorian","bebop_minor","harmonic_minor","melodic_minor","whole_tone","bebop_major","lydian","pentatonic","phrygian","locrian","altered","diminished","whole_half","lydian_dominant","lydian_augmented","half_diminished","dorian_b2","mixolydian_b6","minor_pentatonic","major_blues"],l=function(t){var n;switch(n=t.replace(/[\s]/g,"_").toLowerCase()){case"ionian":n="major";break;case"major_pentatonic":n="pentatonic";break;case"minor":case"aeolian":n="natural_minor";break;case"wholetone":n="whole_tone";break;case"octatonic":case"halfwhole":case"half_whole":n="diminished";break;case"super_locrian":case"superlocrian":case"diminished_whole_tone":case"diminished_wholetone":n="altered";break;case"dorian_b9":n="dorian_b2";break;case"mixolydian_b13":n="mixolydian_b6";break;case"aeolian_b5":case"locrian_#2":n="half_diminished"}return n},f=function(t,n){return a.findIndex(t.scale,function(t){return t.enharmonic(n)})},h=function(t,n){var e,u;t=r.create(t),n=n||"Major",u=l(n),e=s[u].concat(),e.unshift("1"),this.scale=a.map(e,function(n){return t.transpose(n)}),this.intervals=a.map(e,function(t){return i.parse(t)}),this.key=this.root=t,this.name=o.words(n.replace(/_/g," ")).replace(/B(\d)/,"b$1"),this.id=u,this.fullName=this.key.name+" "+this.name,this.toString=function(){return this.scale.join(" ")}};h.prototype.descending=function(){var t,n=this.scale.concat();return"melodic_minor"===this.id&&(n=new h(this.key,"natural_minor").scale.concat()),t=n.shift(),n.reverse(),[t].concat(a.map(n,function(t){return t.transpose("P8",!0)}))},h.prototype.clean=function(){var t=new h(this.key.clean(),this.name);return t.scale=a.map(t.scale,function(t){return t.clean()}),t},h.prototype.transpose=function(t,n){return new h(this.key.transpose(t,n),this.name)},h.prototype.transposeDown=a.partial(h.prototype.transpose,a,!0),h.prototype.nearest=function(t){var n;return t=r.create(t),n=a.chain(this.scale).map(function(n){var e=t.getHalfSteps(n);return{note:n,halfSteps:Math.min(e,12-e)}}).sortBy("halfSteps").value()[0].note,t.octave&&!n.octave&&(n.octave=t.octave,a.contains(["C","D"],t.name)&&a.contains(["A","B"],n.name)&&(n.octave-=1),a.contains(["C","D"],n.name)&&a.contains(["A","B"],t.name)&&(n.octave+=1)),n},h.prototype.contains=function(t){return r.create(t).containedIn(this.scale)},h.prototype.hasInterval=function(t){return r.create(this.root).transpose(t).containedIn(this.scale)},h.prototype.traverse=function(t){var n,e;if(t=r.create(t),!t.octave)throw new Error("Traversable scale must be initialized with octave number");if(n=t.lowerThan(this.root.name)?t.octave-1:t.octave,e=f(this,t),-1===e)throw new Error("Scale does not contain note: "+t);return new p(this,e,n)};var p=function(t,n,e){this.scale=new h(t.root.name+e,t.name),this.index=n,this.octave=e,this.length=t.scale.length,this.name=this.scale.name,this.id=this.scale.id,this.fullName=this.scale.fullName,this.current=function(){return this.scale.scale[this.index]},this.toString=function(){var t=new RegExp("("+this.current()+")");return this.scale.toString().replace(t,"[$1]")}};p.prototype.clean=function(){var t=this.scale.traverse(this.current().clean());return t.scale=t.scale.clean(),t},p.prototype.transpose=function(t,n){var e=this.scale.transpose(t,n),r=this.current().transpose(t,n);return e.traverse(r)},p.prototype.transposeDown=a.partial(p.prototype.transpose,a,!0),p.prototype.shift=function(t){var n=this.scale,e=this.index+t,r=u(e,this.length),i=this.octave+Math.floor(e/this.length);return new p(n,r,i)},p.prototype.shiftInterval=function(t,n){var e=this.current().transpose(t,n);return this.withCurrent(e)},p.prototype.random=function(){var t=Math.floor(Math.random()*this.length),n=this.scale.scale[t];return this.withCurrent(n)},p.prototype.withCurrent=function(t){return this.scale.traverse(t)},a.each(["nearest","contains","hasInterval","descending"],function(t){p.prototype[t]=function(){return this.scale[t].apply(this.scale,arguments)}}),n.exports.scales=s,n.exports.precedence=c,n.exports.isTraversable=function(t){return t instanceof p},n.exports.create=function(t,n){return new h(t,n)}},{"./interval":17,"./note":19,capitalize:21,"mod-loop":22,underscore:28}],21:[function(t,n,e){n.exports=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},n.exports.words=function(t){return t.replace(/(^|[^a-zA-Z\u00C0-\u017F'])([a-zA-Z\u00C0-\u017F])/g,function(t){return t.toUpperCase()})}},{}],22:[function(t,n,e){function r(t,n){var e=t%n;return 0>e?n+e:e}n.exports=r},{}],23:[function(t,n,e){!function(e){"use strict";function r(t){if(!(this instanceof r))return new r(t);if(null==t)t=r.engines.nativeMath;else if("function"!=typeof t)throw new TypeError("Expected engine to be a function, got "+typeof t);this.engine=t}function i(t){return function(){return t}}function o(t,n){return 0===n?t:function(e){return t(e)+n}}function a(t){var n=+t;return 0>n?Math.ceil(n):Math.floor(n)}function u(t,n){return 0>t?Math.max(t+n,0):Math.min(t,n)}function s(){}var c="Random",l="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(t,n){var e=t>>>16&65535,r=65535&t,i=n>>>16&65535,o=65535&n;return r*o+(e*o+r*i<<16>>>0)|0}:Math.imul,f="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(t,n){return t.repeat(n)}:function(t,n){for(var e="";n>0;)1&n&&(e+=t),n>>=1,t+=t;return e},h=r.prototype;r.engines={nativeMath:function(){
return 4294967296*Math.random()|0},mt19937:function(t){function n(t){for(var n=0,e=0;227>(0|n);n=n+1|0)e=2147483648&t[n]|2147483647&t[n+1|0],t[n]=t[n+397|0]^e>>>1^(1&e?2567483615:0);for(;623>(0|n);n=n+1|0)e=2147483648&t[n]|2147483647&t[n+1|0],t[n]=t[n-227|0]^e>>>1^(1&e?2567483615:0);e=2147483648&t[623]|2147483647&t[0],t[623]=t[396]^e>>>1^(1&e?2567483615:0)}function e(t){return t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^t>>>18}function i(t,n){for(var e=1,r=0,i=n.length,o=0|Math.max(i,624),a=0|t[0];(0|o)>0;--o)t[e]=a=(t[e]^l(a^a>>>30,1664525))+(0|n[r])+(0|r)|0,e=e+1|0,++r,(0|e)>623&&(t[0]=t[623],e=1),r>=i&&(r=0);for(o=623;(0|o)>0;--o)t[e]=a=(t[e]^l(a^a>>>30,1566083941))-e|0,e=e+1|0,(0|e)>623&&(t[0]=t[623],e=1);t[0]=2147483648}function o(){function o(){(0|u)>=624&&(n(a),u=0);var t=a[u];return u=u+1|0,s+=1,0|e(t)}var a=new t(624),u=0,s=0;return o.getUseCount=function(){return s},o.discard=function(t){for(s+=t,(0|u)>=624&&(n(a),u=0);t-u>624;)t-=624-u,n(a),u=0;return u=u+t|0,o},o.seed=function(t){var n=0;a[0]=n=0|t;for(var e=1;624>e;e=e+1|0)a[e]=n=l(n^n>>>30,1812433253)+e|0;return u=624,s=0,o},o.seedWithArray=function(t){return o.seed(19650218),i(a,t),o},o.autoSeed=function(){return o.seedWithArray(r.generateEntropyArray())},o}return o}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?function(){var t=null,n=128;return function(){return n>=128&&(null===t&&(t=new Int32Array(128)),crypto.getRandomValues(t),n=0),0|t[n++]}}():null},r.generateEntropyArray=function(){for(var t=[],n=r.engines.nativeMath,e=0;16>e;++e)t[e]=0|n();return t.push(0|(new Date).getTime()),t},r.int32=function(t){return 0|t()},h.int32=function(){return r.int32(this.engine)},r.uint32=function(t){return t()>>>0},h.uint32=function(){return r.uint32(this.engine)},r.uint53=function(t){var n=2097151&t(),e=t()>>>0;return 4294967296*n+e},h.uint53=function(){return r.uint53(this.engine)},r.uint53Full=function(t){for(;;){var n=0|t();if(!(2097152&n)){var e=t()>>>0;return 4294967296*(2097151&n)+e}if(2097152===(4194303&n)&&0===(0|t()))return 9007199254740992}},h.uint53Full=function(){return r.uint53Full(this.engine)},r.int53=function(t){var n=0|t(),e=t()>>>0;return 4294967296*(2097151&n)+e+(2097152&n?-9007199254740992:0)},h.int53=function(){return r.int53(this.engine)},r.int53Full=function(t){for(;;){var n=0|t();if(!(4194304&n)){var e=t()>>>0;return 4294967296*(2097151&n)+e+(2097152&n?-9007199254740992:0)}if(4194304===(8388607&n)&&0===(0|t()))return 9007199254740992}},h.int53Full=function(){return r.int53Full(this.engine)},r.integer=function(){function t(t){return 0===(t+1&t)}function n(t){return function(n){return n()&t}}function e(t){var n=t+1,e=n*Math.floor(4294967296/n);return function(t){var r=0;do r=t()>>>0;while(r>=e);return r%n}}function a(r){return t(r)?n(r):e(r)}function u(t){return 0===(0|t)}function s(t){return function(n){var e=n()&t,r=n()>>>0;return 4294967296*e+r}}function c(t){var n=t*Math.floor(9007199254740992/t);return function(e){var r=0;do{var i=2097151&e(),o=e()>>>0;r=4294967296*i+o}while(r>=n);return r%t}}function l(n){var e=n+1;if(u(e)){var r=(e/4294967296|0)-1;if(t(r))return s(r)}return c(e)}function f(t,n){return function(e){var r=0;do{var i=0|e(),o=e()>>>0;r=4294967296*(2097151&i)+o+(2097152&i?-9007199254740992:0)}while(t>r||r>n);return r}}return function(t,n){if(t=Math.floor(t),n=Math.floor(n),-9007199254740992>t||!isFinite(t))throw new RangeError("Expected min to be at least -9007199254740992");if(n>9007199254740992||!isFinite(n))throw new RangeError("Expected max to be at most 9007199254740992");var e=n-t;return 0>=e||!isFinite(e)?i(t):4294967295===e?0===t?r.uint32:o(r.int32,t+2147483648):4294967295>e?o(a(e),t):9007199254740991===e?o(r.uint53,t):9007199254740991>e?o(l(e),t):n-1-t===9007199254740991?o(r.uint53Full,t):-9007199254740992===t&&9007199254740992===n?r.int53Full:-9007199254740992===t&&9007199254740991===n?r.int53:-9007199254740991===t&&9007199254740992===n?o(r.int53,1):9007199254740992===n?o(f(t-1,n-1),1):f(t,n)}}(),h.integer=function(t,n){return r.integer(t,n)(this.engine)},r.realZeroToOneInclusive=function(t){return r.uint53Full(t)/9007199254740992},h.realZeroToOneInclusive=function(){return r.realZeroToOneInclusive(this.engine)},r.realZeroToOneExclusive=function(t){return r.uint53(t)/9007199254740992},h.realZeroToOneExclusive=function(){return r.realZeroToOneExclusive(this.engine)},r.real=function(){function t(t,n){return 1===n?t:0===n?function(){return 0}:function(e){return t(e)*n}}return function(n,e,i){if(!isFinite(n))throw new RangeError("Expected left to be a finite number");if(!isFinite(e))throw new RangeError("Expected right to be a finite number");return o(t(i?r.realZeroToOneInclusive:r.realZeroToOneExclusive,e-n),n)}}(),h.real=function(t,n,e){return r.real(t,n,e)(this.engine)},r.bool=function(){function t(t){return 1===(1&t())}function n(t,n){return function(e){return t(e)<n}}function e(t){if(0>=t)return i(!1);if(t>=1)return i(!0);var e=4294967296*t;return e%1===0?n(r.int32,e-2147483648|0):n(r.uint53,Math.round(9007199254740992*t))}return function(o,a){return null==a?null==o?t:e(o):0>=o?i(!1):o>=a?i(!0):n(r.integer(0,a-1),o)}}(),h.bool=function(t,n){return r.bool(t,n)(this.engine)},r.pick=function(t,n,e,i){var o=n.length,s=null==e?0:u(a(e),o),c=void 0===i?o:u(a(i),o);if(!(s>=c)){var l=r.integer(s,c-1);return n[l(t)]}},h.pick=function(t,n,e){return r.pick(this.engine,t,n,e)};var p=Array.prototype.slice;r.picker=function(t,n,e){var i=p.call(t,n,e);if(!i.length)return s;var o=r.integer(0,i.length-1);return function(t){return i[o(t)]}},r.shuffle=function(t,n,e){var i=n.length;if(i){null==e&&(e=0);for(var o=i-1>>>0;o>e;--o){var a=r.integer(0,o),u=a(t);if(o!==u){var s=n[o];n[o]=n[u],n[u]=s}}}return n},h.shuffle=function(t){return r.shuffle(this.engine,t)},r.sample=function(t,n,e){if(0>e||e>n.length||!isFinite(e))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===e)return[];var i=p.call(n),o=i.length;if(o===e)return r.shuffle(t,i,0);var a=o-e;return r.shuffle(t,i,a-1).slice(a)},h.sample=function(t,n){return r.sample(this.engine,t,n)},r.die=function(t){return r.integer(1,t)},h.die=function(t){return r.die(t)(this.engine)},r.dice=function(t,n){var e=r.die(t);return function(t){var r=[];r.length=n;for(var i=0;n>i;++i)r[i]=e(t);return r}},h.dice=function(t,n){return r.dice(t,n)(this.engine)},r.uuid4=function(){function t(t,n){return f("0",n-t.length)+t}return function(n){var e=n()>>>0,r=0|n(),i=0|n(),o=n()>>>0;return t(e.toString(16),8)+"-"+t((65535&r).toString(16),4)+"-"+t((r>>4&4095|16384).toString(16),4)+"-"+t((16383&i|32768).toString(16),4)+"-"+t((i>>4&65535).toString(16),4)+t(o.toString(16),8)}}(),h.uuid4=function(){return r.uuid4(this.engine)},r.string=function(){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-";return function(n){null==n&&(n=t);var e=n.length;if(!e)throw new Error("Expected pool not to be an empty string");var i=r.integer(0,e-1);return function(t,e){for(var r="",o=0;e>o;++o){var a=i(t);r+=n.charAt(a)}return r}}}(),h.string=function(t,n){return r.string(n)(this.engine,t)},r.hex=function(){var t="0123456789abcdef",n=r.string(t),e=r.string(t.toUpperCase());return function(t){return t?e:n}}(),h.hex=function(t,n){return r.hex(n)(this.engine,t)},r.date=function(t,n){if(!(t instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof t);if(!(n instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof n);var e=r.integer(t.getTime(),n.getTime());return function(t){return new Date(e(t))}},h.date=function(t,n){return r.date(t,n)(this.engine)},"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof n&&"function"==typeof t?n.exports=r:(!function(){var t=e[c];r.noConflict=function(){return e[c]=t,this}}(),e[c]=r)}(this)},{}],24:[function(t,n,e){function r(t,n){for(var e=0,r=t.indexOf(n);r>=0;)e+=1,r=t.indexOf(n,r+1);return e}n.exports=r},{}],25:[function(t,n,e){function r(t,n,e,r){if("undefined"==typeof e)var e=-1;var i=t.split(n),o=i.slice(0,e),a=i.slice(e);return i=0===a.length?o:o.concat(a.join(n)),"undefined"==typeof r?i:0>r?i.slice(r):i.slice(0,r)}n.exports=r},{}],26:[function(t,n,e){function r(t,n,e,r){if("undefined"==typeof e)var e=-1;if("undefined"==typeof r)var r=0;for(var i=[t],o=t.length-1;o>=0;o--)0===i[0].slice(o).indexOf(n)&&(i.length<=e||-1===e)&&(i.splice(1,0,i[0].slice(o+n.length)),i[0]=i[0].slice(0,o));return r>=0?i.slice(-r):i.slice(0,-r)}n.exports=r},{}],27:[function(t,n,e){!function(){"use strict";function e(t,n){null!==n&&void 0!==n?"string"==typeof n?t.s=n:t.s=n.toString():t.s=n,t.orig=n,null!==n&&void 0!==n?t.__defineGetter__?t.__defineGetter__("length",function(){return t.s.length}):t.length=n.length:t.length=-1}function r(t){e(this,t)}function i(){for(var t in m)!function(t){var n=m[t];g.hasOwnProperty(t)||(v.push(t),g[t]=function(){return String.prototype.s=this,n.apply(this,arguments)})}(t)}function o(){for(var t=0;t<v.length;++t)delete String.prototype[v[t]];v.length=0}function a(){for(var t=u(),n={},e=0;e<t.length;++e){var r=t[e];if("to"!==r&&"toEnd"!==r){var i=g[r];try{var o=typeof i.apply("teststring");n[r]=o}catch(a){}}}return n}function u(){var t=[];if(Object.getOwnPropertyNames)return t=Object.getOwnPropertyNames(g),t.splice(t.indexOf("valueOf"),1),t.splice(t.indexOf("toString"),1),t;var n={};for(var e in String.prototype)n[e]=e;for(var e in Object.prototype)delete n[e];for(var e in n)t.push(e);return t}function s(t){return new r(t)}function c(t,n){var e,r=[];for(e=0;e<t.length;e++)r.push(t[e]),n&&n.call(t,t[e],e);return r}function l(t){var n,e,r=[],i=/^[A-Za-z0-9]+$/;for(t=f(t),e=0;e<t.length;++e)n=t.charAt(e),i.test(n)?r.push(n):"\\000"===n?r.push("\\000"):r.push("\\"+n);return r.join("")}function f(t){return null==t?"":""+t}var h="3.3.1",p={},d={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","ẞ":"SS","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ß":"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"},g=String.prototype,m=r.prototype={between:function(t,n){var e=this.s,r=e.indexOf(t),i=e.indexOf(n,r+t.length);return-1==i&&null!=n?new this.constructor(""):-1==i&&null==n?new this.constructor(e.substring(r+t.length)):new this.constructor(e.slice(r+t.length,i))},camelize:function(){var t=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(t,n,e){return e?e.toUpperCase():""});return new this.constructor(t)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(t){return this.s.charAt(t)},chompLeft:function(t){var n=this.s;return 0===n.indexOf(t)?(n=n.slice(t.length),new this.constructor(n)):this},chompRight:function(t){if(this.endsWith(t)){var n=this.s;return n=n.slice(0,n.length-t.length),new this.constructor(n)}return this},collapseWhitespace:function(){var t=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(t)},contains:function(t){return this.s.indexOf(t)>=0},count:function(n){return t("./_count")(this.s,n)},dasherize:function(){var t=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(t)},latinise:function(){var t=this.replace(/[^A-Za-z0-9\[\] ]/g,function(t){return d[t]||t});return new this.constructor(t)},decodeHtmlEntities:function(){var t=this.s;return t=t.replace(/&#(\d+);?/g,function(t,n){return String.fromCharCode(n)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(t,n){return String.fromCharCode(parseInt(n,16))}).replace(/&([^;\W]+;?)/g,function(t,n){var e=n.replace(/;$/,""),r=p[n]||n.match(/;$/)&&p[e];return"number"==typeof r?String.fromCharCode(r):"string"==typeof r?r:t}),new this.constructor(t)},endsWith:function(){for(var t=Array.prototype.slice.call(arguments,0),n=0;n<t.length;++n){var e=this.s.length-t[n].length;if(e>=0&&this.s.indexOf(t[n],e)===e)return!0}return!1},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,function(t){return"&"+E[t]+";"}))},ensureLeft:function(t){var n=this.s;return 0===n.indexOf(t)?this:new this.constructor(t+n)},ensureRight:function(t){var n=this.s;return this.endsWith(t)?this:new this.constructor(n+t)},humanize:function(){if(null===this.s||void 0===this.s)return new this.constructor("");var t=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(t)},isAlpha:function(){return!/[^a-z\xDF-\xFF]|^$/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xDF-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(t){if(t>=0){var n=this.s.substr(0,t);return new this.constructor(n)}return this.right(-t)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(t,n){if(null==n&&(n=" "),this.s.length>=t)return new this.constructor(this.s);t-=this.s.length;var e=Array(Math.ceil(t/2)+1).join(n),r=Array(Math.floor(t/2)+1).join(n);return new this.constructor(e+this.s+r)},padLeft:function(t,n){return null==n&&(n=" "),this.s.length>=t?new this.constructor(this.s):new this.constructor(Array(t-this.s.length+1).join(n)+this.s)},padRight:function(t,n){return null==n&&(n=" "),this.s.length>=t?new this.constructor(this.s):new this.constructor(this.s+Array(t-this.s.length+1).join(n))},parseCSV:function(t,n,e,r){t=t||",",e=e||"\\","undefined"==typeof n&&(n='"');var i=0,o=[],a=[],u=this.s.length,s=!1,c=!1,l=this,f=function(t){return l.s.charAt(t)};if("undefined"!=typeof r)var h=[];for(n||(s=!0);u>i;){var p=f(i);switch(p){case e:if(s&&(e!==n||f(i+1)===n)){i+=1,o.push(f(i));break}if(e!==n)break;case n:s=!s;break;case t:c&&(s=!1,c=!1),s&&n?o.push(p):(a.push(o.join("")),o.length=0);break;case r:c?(s=!1,c=!1,a.push(o.join("")),h.push(a),a=[],o.length=0):s?o.push(p):h&&(a.push(o.join("")),h.push(a),a=[],o.length=0);break;case" ":s&&o.push(p);break;default:s?o.push(p):p!==n&&(o.push(p),s=!0,c=!0)}i+=1}return a.push(o.join("")),h?(h.push(a),h):a},replaceAll:function(t,n){var e=this.s.split(t).join(n);return new this.constructor(e)},splitLeft:function(n,e,r){return t("./_splitLeft")(this.s,n,e,r)},splitRight:function(n,e,r){return t("./_splitRight")(this.s,n,e,r)},strip:function(){for(var t=this.s,n=0,e=arguments.length;e>n;n++)t=t.split(arguments[n]).join("");return new this.constructor(t)},stripLeft:function(t){var n,e,r=f(this.s);return void 0===t?e=/^\s+/g:(n=l(t),e=new RegExp("^["+n+"]+","g")),new this.constructor(r.replace(e,""))},stripRight:function(t){var n,e,r=f(this.s);return void 0===t?e=/\s+$/g:(n=l(t),e=new RegExp("["+n+"]+$","g")),new this.constructor(r.replace(e,""))},right:function(t){if(t>=0){var n=this.s.substr(this.s.length-t,t);return new this.constructor(n)}return this.left(-t)},setValue:function(t){return e(this,t),this},slugify:function(){var t=new r(new r(this.s).latinise().s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===t.charAt(0)&&(t=t.substr(1)),new this.constructor(t)},startsWith:function(){for(var t=Array.prototype.slice.call(arguments,0),n=0;n<t.length;++n)if(0===this.s.lastIndexOf(t[n],0))return!0;return!1},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var t=this.s,n=arguments.length>0?arguments:[""];return c(n,function(n){t=t.replace(RegExp("</?"+n+"[^<>]*>","gi"),"")}),new this.constructor(t)},template:function(t,n,e){var r=this.s,n=n||s.TMPL_OPEN,e=e||s.TMPL_CLOSE,i=n.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),o=e.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),a=new RegExp(i+"(.+?)"+o,"g"),u=r.match(a)||[];return u.forEach(function(i){var o=i.substring(n.length,i.length-e.length).trim(),a="undefined"==typeof t[o]?"":t[o];r=r.replace(i,a)}),new this.constructor(r)},times:function(t){return new this.constructor(new Array(t+1).join(this.s))},titleCase:function(){var t=this.s;return t&&(t=t.replace(/(^[a-z]| [a-z]|-[a-z]|_[a-z])/g,function(t){return t.toUpperCase()})),new this.constructor(t)},toBoolean:function(){if("string"==typeof this.orig){var t=this.s.toLowerCase();return"true"===t||"yes"===t||"on"===t||"1"===t}return this.orig===!0||1===this.orig},toFloat:function(t){var n=parseFloat(this.s);return t?parseFloat(n.toFixed(t)):n},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var t;return t="undefined"==typeof g.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new this.constructor(t)},trimLeft:function(){var t;return t=g.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new this.constructor(t)},trimRight:function(){var t;return t=g.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new this.constructor(t)},truncate:function(t,n){var e=this.s;if(t=~~t,n=n||"...",e.length<=t)return new this.constructor(e);var i=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},o=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,i);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):new r(o.slice(0,o.length-1)).trimRight().s,new r((o+n).length>e.length?e:e.slice(0,o.length)+n)},toCSV:function(){function t(t){return null!==t&&""!==t}var n=",",e='"',i="\\",o=!0,a=!1,u=[];if("object"==typeof arguments[0]?(n=arguments[0].delimiter||n,n=arguments[0].separator||n,e=arguments[0].qualifier||e,o=!!arguments[0].encloseNumbers,i=arguments[0].escape||i,a=!!arguments[0].keys):"string"==typeof arguments[0]&&(n=arguments[0]),"string"==typeof arguments[1]&&(e=arguments[1]),null===arguments[1]&&(e=null),this.orig instanceof Array)u=this.orig;else for(var s in this.orig)this.orig.hasOwnProperty(s)&&(a?u.push(s):u.push(this.orig[s]));for(var c=i+e,l=[],f=0;f<u.length;++f){var h=t(e);if("number"==typeof u[f]&&(h&=o),h&&l.push(e),null!==u[f]&&void 0!==u[f]){var p=new r(u[f]).replaceAll(e,c).s;l.push(p)}else l.push("");h&&l.push(e),n&&l.push(n)}return l.length=l.length-1,new this.constructor(l.join(""))},toString:function(){return this.s},underscore:function(){var t=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new this.constructor(t)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,function(t,n){var e;return n in b?b[n]:(e=n.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(e[1],16)):(e=n.match(/^#(\d+)$/))?String.fromCharCode(~~e[1]):t}))},valueOf:function(){return this.s.valueOf()},wrapHTML:function(t,n){var e=this.s,r=null==t?"span":t,i="",o="";if("object"==typeof n)for(var a in n)i+=" "+a+'="'+new this.constructor(n[a]).escapeHTML()+'"';return e=o.concat("<",r,i,">",this,"</",r,">"),new this.constructor(e)}},v=[],y=a();for(var w in y)!function(t){var n=g[t];"function"==typeof n&&(m[t]||("string"===y[t]?m[t]=function(){return new this.constructor(n.apply(this,arguments))}:m[t]=n))}(w);m.repeat=m.times,m.include=m.contains,m.toInteger=m.toInt,m.toBool=m.toBoolean,m.decodeHTMLEntities=m.decodeHtmlEntities,m.constructor=r,s.extendPrototype=i,s.restorePrototype=o,s.VERSION=h,s.TMPL_OPEN="{{",s.TMPL_CLOSE="}}",s.ENTITIES=p,"undefined"!=typeof n&&"undefined"!=typeof n.exports?n.exports=s:"function"==typeof define&&define.amd?define([],function(){return s}):window.S=s;var b={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},E={};for(var A in b)E[b[A]]=A;p={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this)},{"./_count":24,"./_splitLeft":25,"./_splitRight":26}],28:[function(t,n,e){(function(){function t(t){function n(n,e,r,i,o,a){for(;o>=0&&a>o;o+=t){var u=i?i[o]:o;r=e(r,n[u],u,n)}return r}return function(e,r,i,o){r=E(r,o,4);var a=!R(e)&&b.keys(e),u=(a||e).length,s=t>0?0:u-1;return arguments.length<3&&(i=e[a?a[s]:s],s+=t),n(e,r,i,a,s,u)}}function r(t){return function(n,e,r){e=A(e,r);for(var i=M(n),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(e(n[o],o,n))return o;return-1}}function i(t,n,e){return function(r,i,o){var a=0,u=M(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(e&&o&&u)return o=e(r,i),r[o]===i?o:-1;if(i!==i)return o=n(h.call(r,a,u),b.isNaN),o>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&u>o;o+=t)if(r[o]===i)return o;return-1}}function o(t,n){var e=P.length,r=t.constructor,i=b.isFunction(r)&&r.prototype||c,o="constructor";for(b.has(t,o)&&!b.contains(n,o)&&n.push(o);e--;)o=P[e],o in t&&t[o]!==i[o]&&!b.contains(n,o)&&n.push(o)}var a=this,u=a._,s=Array.prototype,c=Object.prototype,l=Function.prototype,f=s.push,h=s.slice,p=c.toString,d=c.hasOwnProperty,g=Array.isArray,m=Object.keys,v=l.bind,y=Object.create,w=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof e?("undefined"!=typeof n&&n.exports&&(e=n.exports=b),e._=b):a._=b,b.VERSION="1.8.3";var E=function(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)};case 4:return function(e,r,i,o){return t.call(n,e,r,i,o)}}return function(){return t.apply(n,arguments)}},A=function(t,n,e){return null==t?b.identity:b.isFunction(t)?E(t,n,e):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,n){return A(t,n,1/0)};var x=function(t,n){return function(e){var r=arguments.length;if(2>r||null==e)return e;for(var i=1;r>i;i++)for(var o=arguments[i],a=t(o),u=a.length,s=0;u>s;s++){var c=a[s];n&&void 0!==e[c]||(e[c]=o[c])}return e}},O=function(t){if(!b.isObject(t))return{};if(y)return y(t);w.prototype=t;var n=new w;return w.prototype=null,n},_=function(t){return function(n){return null==n?void 0:n[t]}},S=Math.pow(2,53)-1,M=_("length"),R=function(t){var n=M(t);return"number"==typeof n&&n>=0&&S>=n};b.each=b.forEach=function(t,n,e){n=E(n,e);var r,i;if(R(t))for(r=0,i=t.length;i>r;r++)n(t[r],r,t);else{var o=b.keys(t);for(r=0,i=o.length;i>r;r++)n(t[o[r]],o[r],t)}return t},b.map=b.collect=function(t,n,e){n=A(n,e);for(var r=!R(t)&&b.keys(t),i=(r||t).length,o=Array(i),a=0;i>a;a++){var u=r?r[a]:a;o[a]=n(t[u],u,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,n,e){var r;return r=R(t)?b.findIndex(t,n,e):b.findKey(t,n,e),void 0!==r&&-1!==r?t[r]:void 0},b.filter=b.select=function(t,n,e){var r=[];return n=A(n,e),b.each(t,function(t,e,i){
n(t,e,i)&&r.push(t)}),r},b.reject=function(t,n,e){return b.filter(t,b.negate(A(n)),e)},b.every=b.all=function(t,n,e){n=A(n,e);for(var r=!R(t)&&b.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(!n(t[a],a,t))return!1}return!0},b.some=b.any=function(t,n,e){n=A(n,e);for(var r=!R(t)&&b.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(n(t[a],a,t))return!0}return!1},b.contains=b.includes=b.include=function(t,n,e,r){return R(t)||(t=b.values(t)),("number"!=typeof e||r)&&(e=0),b.indexOf(t,n,e)>=0},b.invoke=function(t,n){var e=h.call(arguments,2),r=b.isFunction(n);return b.map(t,function(t){var i=r?n:t[n];return null==i?i:i.apply(t,e)})},b.pluck=function(t,n){return b.map(t,b.property(n))},b.where=function(t,n){return b.filter(t,b.matcher(n))},b.findWhere=function(t,n){return b.find(t,b.matcher(n))},b.max=function(t,n,e){var r,i,o=-(1/0),a=-(1/0);if(null==n&&null!=t){t=R(t)?t:b.values(t);for(var u=0,s=t.length;s>u;u++)r=t[u],r>o&&(o=r)}else n=A(n,e),b.each(t,function(t,e,r){i=n(t,e,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},b.min=function(t,n,e){var r,i,o=1/0,a=1/0;if(null==n&&null!=t){t=R(t)?t:b.values(t);for(var u=0,s=t.length;s>u;u++)r=t[u],o>r&&(o=r)}else n=A(n,e),b.each(t,function(t,e,r){i=n(t,e,r),(a>i||i===1/0&&o===1/0)&&(o=t,a=i)});return o},b.shuffle=function(t){for(var n,e=R(t)?t:b.values(t),r=e.length,i=Array(r),o=0;r>o;o++)n=b.random(0,o),n!==o&&(i[o]=i[n]),i[n]=e[o];return i},b.sample=function(t,n,e){return null==n||e?(R(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,n))},b.sortBy=function(t,n,e){return n=A(n,e),b.pluck(b.map(t,function(t,e,r){return{value:t,index:e,criteria:n(t,e,r)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index-n.index}),"value")};var C=function(t){return function(n,e,r){var i={};return e=A(e,r),b.each(n,function(r,o){var a=e(r,o,n);t(i,r,a)}),i}};b.groupBy=C(function(t,n,e){b.has(t,e)?t[e].push(n):t[e]=[n]}),b.indexBy=C(function(t,n,e){t[e]=n}),b.countBy=C(function(t,n,e){b.has(t,e)?t[e]++:t[e]=1}),b.toArray=function(t){return t?b.isArray(t)?h.call(t):R(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:R(t)?t.length:b.keys(t).length},b.partition=function(t,n,e){n=A(n,e);var r=[],i=[];return b.each(t,function(t,e,o){(n(t,e,o)?r:i).push(t)}),[r,i]},b.first=b.head=b.take=function(t,n,e){return null!=t?null==n||e?t[0]:b.initial(t,t.length-n):void 0},b.initial=function(t,n,e){return h.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))},b.last=function(t,n,e){return null!=t?null==n||e?t[t.length-1]:b.rest(t,Math.max(0,t.length-n)):void 0},b.rest=b.tail=b.drop=function(t,n,e){return h.call(t,null==n||e?1:n)},b.compact=function(t){return b.filter(t,b.identity)};var T=function(t,n,e,r){for(var i=[],o=0,a=r||0,u=M(t);u>a;a++){var s=t[a];if(R(s)&&(b.isArray(s)||b.isArguments(s))){n||(s=T(s,n,e));var c=0,l=s.length;for(i.length+=l;l>c;)i[o++]=s[c++]}else e||(i[o++]=s)}return i};b.flatten=function(t,n){return T(t,n,!1)},b.without=function(t){return b.difference(t,h.call(arguments,1))},b.uniq=b.unique=function(t,n,e,r){b.isBoolean(n)||(r=e,e=n,n=!1),null!=e&&(e=A(e,r));for(var i=[],o=[],a=0,u=M(t);u>a;a++){var s=t[a],c=e?e(s,a,t):s;n?(a&&o===c||i.push(s),o=c):e?b.contains(o,c)||(o.push(c),i.push(s)):b.contains(i,s)||i.push(s)}return i},b.union=function(){return b.uniq(T(arguments,!0,!0))},b.intersection=function(t){for(var n=[],e=arguments.length,r=0,i=M(t);i>r;r++){var o=t[r];if(!b.contains(n,o)){for(var a=1;e>a&&b.contains(arguments[a],o);a++);a===e&&n.push(o)}}return n},b.difference=function(t){var n=T(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(n,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var n=t&&b.max(t,M).length||0,e=Array(n),r=0;n>r;r++)e[r]=b.pluck(t,r);return e},b.object=function(t,n){for(var e={},r=0,i=M(t);i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(t,n,e,r){e=A(e,r,1);for(var i=e(n),o=0,a=M(t);a>o;){var u=Math.floor((o+a)/2);e(t[u])<i?o=u+1:a=u}return o},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,n,e){null==n&&(n=t||0,t=0),e=e||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=Array(r),o=0;r>o;o++,t+=e)i[o]=t;return i};var I=function(t,n,e,r,i){if(!(r instanceof n))return t.apply(e,i);var o=O(t.prototype),a=t.apply(o,i);return b.isObject(a)?a:o};b.bind=function(t,n){if(v&&t.bind===v)return v.apply(t,h.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var e=h.call(arguments,2),r=function(){return I(t,r,n,this,e.concat(h.call(arguments)))};return r},b.partial=function(t){var n=h.call(arguments,1),e=function(){for(var r=0,i=n.length,o=Array(i),a=0;i>a;a++)o[a]=n[a]===b?arguments[r++]:n[a];for(;r<arguments.length;)o.push(arguments[r++]);return I(t,e,this,this,o)};return e},b.bindAll=function(t){var n,e,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(n=1;r>n;n++)e=arguments[n],t[e]=b.bind(t[e],t);return t},b.memoize=function(t,n){var e=function(r){var i=e.cache,o=""+(n?n.apply(this,arguments):r);return b.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return e.cache={},e},b.delay=function(t,n){var e=h.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,n,e){var r,i,o,a=null,u=0;e||(e={});var s=function(){u=e.leading===!1?0:b.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=b.now();u||e.leading!==!1||(u=c);var l=n-(c-u);return r=this,i=arguments,0>=l||l>n?(a&&(clearTimeout(a),a=null),u=c,o=t.apply(r,i),a||(r=i=null)):a||e.trailing===!1||(a=setTimeout(s,l)),o}},b.debounce=function(t,n,e){var r,i,o,a,u,s=function(){var c=b.now()-a;n>c&&c>=0?r=setTimeout(s,n-c):(r=null,e||(u=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=b.now();var c=e&&!r;return r||(r=setTimeout(s,n)),c&&(u=t.apply(o,i),o=i=null),u}},b.wrap=function(t,n){return b.partial(n,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}},b.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},b.before=function(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),1>=t&&(n=null),e}},b.once=b.partial(b.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(m)return m(t);var n=[];for(var e in t)b.has(t,e)&&n.push(e);return j&&o(t,n),n},b.allKeys=function(t){if(!b.isObject(t))return[];var n=[];for(var e in t)n.push(e);return j&&o(t,n),n},b.values=function(t){for(var n=b.keys(t),e=n.length,r=Array(e),i=0;e>i;i++)r[i]=t[n[i]];return r},b.mapObject=function(t,n,e){n=A(n,e);for(var r,i=b.keys(t),o=i.length,a={},u=0;o>u;u++)r=i[u],a[r]=n(t[r],r,t);return a},b.pairs=function(t){for(var n=b.keys(t),e=n.length,r=Array(e),i=0;e>i;i++)r[i]=[n[i],t[n[i]]];return r},b.invert=function(t){for(var n={},e=b.keys(t),r=0,i=e.length;i>r;r++)n[t[e[r]]]=e[r];return n},b.functions=b.methods=function(t){var n=[];for(var e in t)b.isFunction(t[e])&&n.push(e);return n.sort()},b.extend=x(b.allKeys),b.extendOwn=b.assign=x(b.keys),b.findKey=function(t,n,e){n=A(n,e);for(var r,i=b.keys(t),o=0,a=i.length;a>o;o++)if(r=i[o],n(t[r],r,t))return r},b.pick=function(t,n,e){var r,i,o={},a=t;if(null==a)return o;b.isFunction(n)?(i=b.allKeys(a),r=E(n,e)):(i=T(arguments,!1,!1,1),r=function(t,n,e){return n in e},a=Object(a));for(var u=0,s=i.length;s>u;u++){var c=i[u],l=a[c];r(l,c,a)&&(o[c]=l)}return o},b.omit=function(t,n,e){if(b.isFunction(n))n=b.negate(n);else{var r=b.map(T(arguments,!1,!1,1),String);n=function(t,n){return!b.contains(r,n)}}return b.pick(t,n,e)},b.defaults=x(b.allKeys,!0),b.create=function(t,n){var e=O(t);return n&&b.extendOwn(e,n),e},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,n){return n(t),t},b.isMatch=function(t,n){var e=b.keys(n),r=e.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var a=e[o];if(n[a]!==i[a]||!(a in i))return!1}return!0};var U=function(t,n,e,r){if(t===n)return 0!==t||1/t===1/n;if(null==t||null==n)return t===n;t instanceof b&&(t=t._wrapped),n instanceof b&&(n=n._wrapped);var i=p.call(t);if(i!==p.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!==+t?+n!==+n:0===+t?1/+t===1/n:+t===+n;case"[object Date]":case"[object Boolean]":return+t===+n}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof n)return!1;var a=t.constructor,u=n.constructor;if(a!==u&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1}e=e||[],r=r||[];for(var s=e.length;s--;)if(e[s]===t)return r[s]===n;if(e.push(t),r.push(n),o){if(s=t.length,s!==n.length)return!1;for(;s--;)if(!U(t[s],n[s],e,r))return!1}else{var c,l=b.keys(t);if(s=l.length,b.keys(n).length!==s)return!1;for(;s--;)if(c=l[s],!b.has(n,c)||!U(t[c],n[c],e,r))return!1}return e.pop(),r.pop(),!0};b.isEqual=function(t,n){return U(t,n)},b.isEmpty=function(t){return null==t?!0:R(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=g||function(t){return"[object Array]"===p.call(t)},b.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(n){return p.call(n)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,n){return null!=t&&d.call(t,n)},b.noConflict=function(){return a._=u,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=_,b.propertyOf=function(t){return null==t?function(){}:function(n){return t[n]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(n){return b.isMatch(n,t)}},b.times=function(t,n,e){var r=Array(Math.max(0,t));n=E(n,e,1);for(var i=0;t>i;i++)r[i]=n(i);return r},b.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},k=b.invert(B),D=function(t){var n=function(n){return t[n]},e="(?:"+b.keys(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}};b.escape=D(B),b.unescape=D(k),b.result=function(t,n,e){var r=null==t?void 0:t[n];return void 0===r&&(r=e),b.isFunction(r)?r.call(t):r};var L=0;b.uniqueId=function(t){var n=++L+"";return t?t+n:n},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,z=function(t){return"\\"+N[t]};b.template=function(t,n,e){!n&&e&&(n=e),n=b.defaults({},n,b.templateSettings);var r=RegExp([(n.escape||$).source,(n.interpolate||$).source,(n.evaluate||$).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(n,e,r,a,u){return o+=t.slice(i,u).replace(F,z),i=u+n.length,e?o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),n}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}var s=function(t){return a.call(this,t,b)},c=n.variable||"obj";return s.source="function("+c+"){\n"+o+"}",s},b.chain=function(t){var n=b(t);return n._chain=!0,n};var Y=function(t,n){return t._chain?b(n).chain():n};b.mixin=function(t){b.each(b.functions(t),function(n){var e=b[n]=t[n];b.prototype[n]=function(){var t=[this._wrapped];return f.apply(t,arguments),Y(this,e.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=s[t];b.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],Y(this,e)}}),b.each(["concat","join","slice"],function(t){var n=s[t];b.prototype[t]=function(){return Y(this,n.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],29:[function(t,n,e){var r,i,o,a,u,s,c,l,f,h,p,d,g;i=t("underscore"),r=t("string"),s=function(t){return r(t).startsWith(":")},f=function(t,n){return t.current.footer=!0,t},d=function(t,n){var e,i,o;return o=n.split(" ")[0],e=o.slice(2),i=r(n).chompLeft(o).trim().s,t.meta[e]=i,t},l=function(t,n){var e,i,o;return o=r(n).strip(" ").split("=>"),2===o.length&&(i=o[0],e=o[1].split(","),t.alts[i]=e),t},o=function(t,n){var e,r;return e=!i.contains(t.sections,n),t.sections.push(n),r={section:n,firstTime:e,lines:[]},t.lyrics.push(r),e&&(t.chords[n]=[]),t.current.lastLine=null,t},g=function(t,n){return o(t,r(n.slice(1)).trim().s)},p=function(t,n){var e;return e=t.current.lastLine,t.sections.length||(t=o(t,"UNTITLED")),s(n)?i.last(t.lyrics).lines.push({chords:r(n.slice(1)).trim().s.split(" "),lyrics:""}):e&&!e.lyrics?e.lyrics=n:i.last(t.lyrics).lines.push({chords:[],lyrics:n}),t.current.lastLine=i.last(i.last(t.lyrics).lines),t},h=function(t,n){return n=r(n).trim().collapseWhitespace().s,n?r(n).startsWith("###")?f(t,n):r(n).startsWith("##")?d(t,n):r(n).startsWith("#")?g(t,n):t.current.footer?l(t,n):p(t,n):t},a=function(t,n,e,o){var a,u,s,c,l,f,h,p,d;return d=n.section,f=e.lyrics,c=e.chords,h=[],a=function(t){return h.push(i.defaults(t,{string:"",chord:"",exception:!1,wordExtension:!1}))},n.firstTime&&t.chords[d].push(c),p=t.chords[d][o],u=f.split("^"),s=0,l=[],c=c.length?i.map(c,function(t,n){return"*"===t?p[n]:(l.push(n),t)}):p,f?i.each(u,function(t,n){var e,o;return 0===n?void(t&&a({string:u[0]})):(o=u[n-1],e=c[s],null!=t&&" "===t[0]?(a({chord:e,exception:i.contains(l,s)}),a({string:r(t).trim().s})):a({string:r(t).trim().s,chord:e,exception:i.contains(l,s)}),t&&o&&" "!==t[0]&&" "!==r(o).right(1).s&&(i.last(h).wordExtension=!0),s+=1)}):i.each(c,function(t,n){return a({chord:t,exception:i.contains(l,n)})}),h},u=function(t,n){return n.lines=i.map(n.lines,i.partial(a,t,n)),n.lines.length||(n.lines=i.findWhere(t.lyrics,{section:n.section}).lines.concat(),n.lines=i.map(n.lines,function(t){return i.map(t,function(t){return i.extend(i.clone(t),{exception:!1})})})),n},c=function(t){return i.omit(t,"current")},n.exports={parseString:function(t){var n,e;return n=r(t).lines(),e={current:{footer:!1,lastLine:null},meta:{},alts:{},sections:[],chords:{},lyrics:[]},e=i.reduce(n,h,e),e.lyrics=i.map(e.lyrics,i.partial(u,e)),c(e)}}},{string:27,underscore:28}],30:[function(t,n,e){var r,i,o;r=t("string"),i=t("sharp11"),o=function(t){var n;if(n=t.match(/^[A-G][#b]?/),!n)throw new Error("Invalid chord name "+t);return n[0]},n.exports=function(t,n,e){var a,u;return a=i.note.create(t).getInterval(n),u=o(e),e=r(e).chompLeft(u).s,u=i.note.create(u).transpose(a).clean(),u.name+e}},{sharp11:14,string:27}]},{},[3]);